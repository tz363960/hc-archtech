!function(e){function t(t){for(var r,s,o=t[0],u=t[1],c=t[2],p=0,d=[];p<o.length;p++)s=o[p],a[s]&&d.push(a[s][0]),a[s]=0;for(r in u)Object.prototype.hasOwnProperty.call(u,r)&&(e[r]=u[r]);for(l&&l(t);d.length;)d.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,o=1;o<n.length;o++){var u=n[o];0!==a[u]&&(r=!1)}r&&(i.splice(t--,1),e=s(s.s=n[0]))}return e}var r={},a={1:0},i=[];function s(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=r,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)s.d(n,r,function(t){return e[t]}.bind(null,r));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="./";var o=window.webpackJsonp=window.webpackJsonp||[],u=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var l=u;i.push([712,0,2]),n()}({1003:function(e,t){},1102:function(e,t,n){var r={"./Binary_Property/ASCII.js":1103,"./Binary_Property/ASCII_Hex_Digit.js":1104,"./Binary_Property/Alphabetic.js":1105,"./Binary_Property/Any.js":1106,"./Binary_Property/Assigned.js":1107,"./Binary_Property/Bidi_Control.js":1108,"./Binary_Property/Bidi_Mirrored.js":1109,"./Binary_Property/Case_Ignorable.js":1110,"./Binary_Property/Cased.js":1111,"./Binary_Property/Changes_When_Casefolded.js":1112,"./Binary_Property/Changes_When_Casemapped.js":1113,"./Binary_Property/Changes_When_Lowercased.js":1114,"./Binary_Property/Changes_When_NFKC_Casefolded.js":1115,"./Binary_Property/Changes_When_Titlecased.js":1116,"./Binary_Property/Changes_When_Uppercased.js":1117,"./Binary_Property/Dash.js":1118,"./Binary_Property/Default_Ignorable_Code_Point.js":1119,"./Binary_Property/Deprecated.js":1120,"./Binary_Property/Diacritic.js":1121,"./Binary_Property/Emoji.js":1122,"./Binary_Property/Emoji_Component.js":1123,"./Binary_Property/Emoji_Modifier.js":1124,"./Binary_Property/Emoji_Modifier_Base.js":1125,"./Binary_Property/Emoji_Presentation.js":1126,"./Binary_Property/Extended_Pictographic.js":1127,"./Binary_Property/Extender.js":1128,"./Binary_Property/Grapheme_Base.js":1129,"./Binary_Property/Grapheme_Extend.js":1130,"./Binary_Property/Hex_Digit.js":1131,"./Binary_Property/IDS_Binary_Operator.js":1132,"./Binary_Property/IDS_Trinary_Operator.js":1133,"./Binary_Property/ID_Continue.js":1134,"./Binary_Property/ID_Start.js":1135,"./Binary_Property/Ideographic.js":1136,"./Binary_Property/Join_Control.js":1137,"./Binary_Property/Logical_Order_Exception.js":1138,"./Binary_Property/Lowercase.js":1139,"./Binary_Property/Math.js":1140,"./Binary_Property/Noncharacter_Code_Point.js":1141,"./Binary_Property/Pattern_Syntax.js":1142,"./Binary_Property/Pattern_White_Space.js":1143,"./Binary_Property/Quotation_Mark.js":1144,"./Binary_Property/Radical.js":1145,"./Binary_Property/Regional_Indicator.js":1146,"./Binary_Property/Sentence_Terminal.js":1147,"./Binary_Property/Soft_Dotted.js":1148,"./Binary_Property/Terminal_Punctuation.js":1149,"./Binary_Property/Unified_Ideograph.js":1150,"./Binary_Property/Uppercase.js":1151,"./Binary_Property/Variation_Selector.js":1152,"./Binary_Property/White_Space.js":1153,"./Binary_Property/XID_Continue.js":1154,"./Binary_Property/XID_Start.js":1155,"./General_Category/Cased_Letter.js":1156,"./General_Category/Close_Punctuation.js":1157,"./General_Category/Connector_Punctuation.js":1158,"./General_Category/Control.js":1159,"./General_Category/Currency_Symbol.js":1160,"./General_Category/Dash_Punctuation.js":1161,"./General_Category/Decimal_Number.js":1162,"./General_Category/Enclosing_Mark.js":1163,"./General_Category/Final_Punctuation.js":1164,"./General_Category/Format.js":1165,"./General_Category/Initial_Punctuation.js":1166,"./General_Category/Letter.js":1167,"./General_Category/Letter_Number.js":1168,"./General_Category/Line_Separator.js":1169,"./General_Category/Lowercase_Letter.js":1170,"./General_Category/Mark.js":1171,"./General_Category/Math_Symbol.js":1172,"./General_Category/Modifier_Letter.js":1173,"./General_Category/Modifier_Symbol.js":1174,"./General_Category/Nonspacing_Mark.js":1175,"./General_Category/Number.js":1176,"./General_Category/Open_Punctuation.js":1177,"./General_Category/Other.js":1178,"./General_Category/Other_Letter.js":1179,"./General_Category/Other_Number.js":1180,"./General_Category/Other_Punctuation.js":1181,"./General_Category/Other_Symbol.js":1182,"./General_Category/Paragraph_Separator.js":1183,"./General_Category/Private_Use.js":1184,"./General_Category/Punctuation.js":1185,"./General_Category/Separator.js":1186,"./General_Category/Space_Separator.js":1187,"./General_Category/Spacing_Mark.js":1188,"./General_Category/Surrogate.js":1189,"./General_Category/Symbol.js":1190,"./General_Category/Titlecase_Letter.js":1191,"./General_Category/Unassigned.js":1192,"./General_Category/Uppercase_Letter.js":1193,"./Script/Adlam.js":1194,"./Script/Ahom.js":1195,"./Script/Anatolian_Hieroglyphs.js":1196,"./Script/Arabic.js":1197,"./Script/Armenian.js":1198,"./Script/Avestan.js":1199,"./Script/Balinese.js":1200,"./Script/Bamum.js":1201,"./Script/Bassa_Vah.js":1202,"./Script/Batak.js":1203,"./Script/Bengali.js":1204,"./Script/Bhaiksuki.js":1205,"./Script/Bopomofo.js":1206,"./Script/Brahmi.js":1207,"./Script/Braille.js":1208,"./Script/Buginese.js":1209,"./Script/Buhid.js":1210,"./Script/Canadian_Aboriginal.js":1211,"./Script/Carian.js":1212,"./Script/Caucasian_Albanian.js":1213,"./Script/Chakma.js":1214,"./Script/Cham.js":1215,"./Script/Cherokee.js":1216,"./Script/Common.js":1217,"./Script/Coptic.js":1218,"./Script/Cuneiform.js":1219,"./Script/Cypriot.js":1220,"./Script/Cyrillic.js":1221,"./Script/Deseret.js":1222,"./Script/Devanagari.js":1223,"./Script/Dogra.js":1224,"./Script/Duployan.js":1225,"./Script/Egyptian_Hieroglyphs.js":1226,"./Script/Elbasan.js":1227,"./Script/Elymaic.js":1228,"./Script/Ethiopic.js":1229,"./Script/Georgian.js":1230,"./Script/Glagolitic.js":1231,"./Script/Gothic.js":1232,"./Script/Grantha.js":1233,"./Script/Greek.js":1234,"./Script/Gujarati.js":1235,"./Script/Gunjala_Gondi.js":1236,"./Script/Gurmukhi.js":1237,"./Script/Han.js":1238,"./Script/Hangul.js":1239,"./Script/Hanifi_Rohingya.js":1240,"./Script/Hanunoo.js":1241,"./Script/Hatran.js":1242,"./Script/Hebrew.js":1243,"./Script/Hiragana.js":1244,"./Script/Imperial_Aramaic.js":1245,"./Script/Inherited.js":1246,"./Script/Inscriptional_Pahlavi.js":1247,"./Script/Inscriptional_Parthian.js":1248,"./Script/Javanese.js":1249,"./Script/Kaithi.js":1250,"./Script/Kannada.js":1251,"./Script/Katakana.js":1252,"./Script/Kayah_Li.js":1253,"./Script/Kharoshthi.js":1254,"./Script/Khmer.js":1255,"./Script/Khojki.js":1256,"./Script/Khudawadi.js":1257,"./Script/Lao.js":1258,"./Script/Latin.js":1259,"./Script/Lepcha.js":1260,"./Script/Limbu.js":1261,"./Script/Linear_A.js":1262,"./Script/Linear_B.js":1263,"./Script/Lisu.js":1264,"./Script/Lycian.js":1265,"./Script/Lydian.js":1266,"./Script/Mahajani.js":1267,"./Script/Makasar.js":1268,"./Script/Malayalam.js":1269,"./Script/Mandaic.js":1270,"./Script/Manichaean.js":1271,"./Script/Marchen.js":1272,"./Script/Masaram_Gondi.js":1273,"./Script/Medefaidrin.js":1274,"./Script/Meetei_Mayek.js":1275,"./Script/Mende_Kikakui.js":1276,"./Script/Meroitic_Cursive.js":1277,"./Script/Meroitic_Hieroglyphs.js":1278,"./Script/Miao.js":1279,"./Script/Modi.js":1280,"./Script/Mongolian.js":1281,"./Script/Mro.js":1282,"./Script/Multani.js":1283,"./Script/Myanmar.js":1284,"./Script/Nabataean.js":1285,"./Script/Nandinagari.js":1286,"./Script/New_Tai_Lue.js":1287,"./Script/Newa.js":1288,"./Script/Nko.js":1289,"./Script/Nushu.js":1290,"./Script/Nyiakeng_Puachue_Hmong.js":1291,"./Script/Ogham.js":1292,"./Script/Ol_Chiki.js":1293,"./Script/Old_Hungarian.js":1294,"./Script/Old_Italic.js":1295,"./Script/Old_North_Arabian.js":1296,"./Script/Old_Permic.js":1297,"./Script/Old_Persian.js":1298,"./Script/Old_Sogdian.js":1299,"./Script/Old_South_Arabian.js":1300,"./Script/Old_Turkic.js":1301,"./Script/Oriya.js":1302,"./Script/Osage.js":1303,"./Script/Osmanya.js":1304,"./Script/Pahawh_Hmong.js":1305,"./Script/Palmyrene.js":1306,"./Script/Pau_Cin_Hau.js":1307,"./Script/Phags_Pa.js":1308,"./Script/Phoenician.js":1309,"./Script/Psalter_Pahlavi.js":1310,"./Script/Rejang.js":1311,"./Script/Runic.js":1312,"./Script/Samaritan.js":1313,"./Script/Saurashtra.js":1314,"./Script/Sharada.js":1315,"./Script/Shavian.js":1316,"./Script/Siddham.js":1317,"./Script/SignWriting.js":1318,"./Script/Sinhala.js":1319,"./Script/Sogdian.js":1320,"./Script/Sora_Sompeng.js":1321,"./Script/Soyombo.js":1322,"./Script/Sundanese.js":1323,"./Script/Syloti_Nagri.js":1324,"./Script/Syriac.js":1325,"./Script/Tagalog.js":1326,"./Script/Tagbanwa.js":1327,"./Script/Tai_Le.js":1328,"./Script/Tai_Tham.js":1329,"./Script/Tai_Viet.js":1330,"./Script/Takri.js":1331,"./Script/Tamil.js":1332,"./Script/Tangut.js":1333,"./Script/Telugu.js":1334,"./Script/Thaana.js":1335,"./Script/Thai.js":1336,"./Script/Tibetan.js":1337,"./Script/Tifinagh.js":1338,"./Script/Tirhuta.js":1339,"./Script/Ugaritic.js":1340,"./Script/Vai.js":1341,"./Script/Wancho.js":1342,"./Script/Warang_Citi.js":1343,"./Script/Yi.js":1344,"./Script/Zanabazar_Square.js":1345,"./Script_Extensions/Adlam.js":1346,"./Script_Extensions/Ahom.js":1347,"./Script_Extensions/Anatolian_Hieroglyphs.js":1348,"./Script_Extensions/Arabic.js":1349,"./Script_Extensions/Armenian.js":1350,"./Script_Extensions/Avestan.js":1351,"./Script_Extensions/Balinese.js":1352,"./Script_Extensions/Bamum.js":1353,"./Script_Extensions/Bassa_Vah.js":1354,"./Script_Extensions/Batak.js":1355,"./Script_Extensions/Bengali.js":1356,"./Script_Extensions/Bhaiksuki.js":1357,"./Script_Extensions/Bopomofo.js":1358,"./Script_Extensions/Brahmi.js":1359,"./Script_Extensions/Braille.js":1360,"./Script_Extensions/Buginese.js":1361,"./Script_Extensions/Buhid.js":1362,"./Script_Extensions/Canadian_Aboriginal.js":1363,"./Script_Extensions/Carian.js":1364,"./Script_Extensions/Caucasian_Albanian.js":1365,"./Script_Extensions/Chakma.js":1366,"./Script_Extensions/Cham.js":1367,"./Script_Extensions/Cherokee.js":1368,"./Script_Extensions/Common.js":1369,"./Script_Extensions/Coptic.js":1370,"./Script_Extensions/Cuneiform.js":1371,"./Script_Extensions/Cypriot.js":1372,"./Script_Extensions/Cyrillic.js":1373,"./Script_Extensions/Deseret.js":1374,"./Script_Extensions/Devanagari.js":1375,"./Script_Extensions/Dogra.js":1376,"./Script_Extensions/Duployan.js":1377,"./Script_Extensions/Egyptian_Hieroglyphs.js":1378,"./Script_Extensions/Elbasan.js":1379,"./Script_Extensions/Elymaic.js":1380,"./Script_Extensions/Ethiopic.js":1381,"./Script_Extensions/Georgian.js":1382,"./Script_Extensions/Glagolitic.js":1383,"./Script_Extensions/Gothic.js":1384,"./Script_Extensions/Grantha.js":1385,"./Script_Extensions/Greek.js":1386,"./Script_Extensions/Gujarati.js":1387,"./Script_Extensions/Gunjala_Gondi.js":1388,"./Script_Extensions/Gurmukhi.js":1389,"./Script_Extensions/Han.js":1390,"./Script_Extensions/Hangul.js":1391,"./Script_Extensions/Hanifi_Rohingya.js":1392,"./Script_Extensions/Hanunoo.js":1393,"./Script_Extensions/Hatran.js":1394,"./Script_Extensions/Hebrew.js":1395,"./Script_Extensions/Hiragana.js":1396,"./Script_Extensions/Imperial_Aramaic.js":1397,"./Script_Extensions/Inherited.js":1398,"./Script_Extensions/Inscriptional_Pahlavi.js":1399,"./Script_Extensions/Inscriptional_Parthian.js":1400,"./Script_Extensions/Javanese.js":1401,"./Script_Extensions/Kaithi.js":1402,"./Script_Extensions/Kannada.js":1403,"./Script_Extensions/Katakana.js":1404,"./Script_Extensions/Kayah_Li.js":1405,"./Script_Extensions/Kharoshthi.js":1406,"./Script_Extensions/Khmer.js":1407,"./Script_Extensions/Khojki.js":1408,"./Script_Extensions/Khudawadi.js":1409,"./Script_Extensions/Lao.js":1410,"./Script_Extensions/Latin.js":1411,"./Script_Extensions/Lepcha.js":1412,"./Script_Extensions/Limbu.js":1413,"./Script_Extensions/Linear_A.js":1414,"./Script_Extensions/Linear_B.js":1415,"./Script_Extensions/Lisu.js":1416,"./Script_Extensions/Lycian.js":1417,"./Script_Extensions/Lydian.js":1418,"./Script_Extensions/Mahajani.js":1419,"./Script_Extensions/Makasar.js":1420,"./Script_Extensions/Malayalam.js":1421,"./Script_Extensions/Mandaic.js":1422,"./Script_Extensions/Manichaean.js":1423,"./Script_Extensions/Marchen.js":1424,"./Script_Extensions/Masaram_Gondi.js":1425,"./Script_Extensions/Medefaidrin.js":1426,"./Script_Extensions/Meetei_Mayek.js":1427,"./Script_Extensions/Mende_Kikakui.js":1428,"./Script_Extensions/Meroitic_Cursive.js":1429,"./Script_Extensions/Meroitic_Hieroglyphs.js":1430,"./Script_Extensions/Miao.js":1431,"./Script_Extensions/Modi.js":1432,"./Script_Extensions/Mongolian.js":1433,"./Script_Extensions/Mro.js":1434,"./Script_Extensions/Multani.js":1435,"./Script_Extensions/Myanmar.js":1436,"./Script_Extensions/Nabataean.js":1437,"./Script_Extensions/Nandinagari.js":1438,"./Script_Extensions/New_Tai_Lue.js":1439,"./Script_Extensions/Newa.js":1440,"./Script_Extensions/Nko.js":1441,"./Script_Extensions/Nushu.js":1442,"./Script_Extensions/Nyiakeng_Puachue_Hmong.js":1443,"./Script_Extensions/Ogham.js":1444,"./Script_Extensions/Ol_Chiki.js":1445,"./Script_Extensions/Old_Hungarian.js":1446,"./Script_Extensions/Old_Italic.js":1447,"./Script_Extensions/Old_North_Arabian.js":1448,"./Script_Extensions/Old_Permic.js":1449,"./Script_Extensions/Old_Persian.js":1450,"./Script_Extensions/Old_Sogdian.js":1451,"./Script_Extensions/Old_South_Arabian.js":1452,"./Script_Extensions/Old_Turkic.js":1453,"./Script_Extensions/Oriya.js":1454,"./Script_Extensions/Osage.js":1455,"./Script_Extensions/Osmanya.js":1456,"./Script_Extensions/Pahawh_Hmong.js":1457,"./Script_Extensions/Palmyrene.js":1458,"./Script_Extensions/Pau_Cin_Hau.js":1459,"./Script_Extensions/Phags_Pa.js":1460,"./Script_Extensions/Phoenician.js":1461,"./Script_Extensions/Psalter_Pahlavi.js":1462,"./Script_Extensions/Rejang.js":1463,"./Script_Extensions/Runic.js":1464,"./Script_Extensions/Samaritan.js":1465,"./Script_Extensions/Saurashtra.js":1466,"./Script_Extensions/Sharada.js":1467,"./Script_Extensions/Shavian.js":1468,"./Script_Extensions/Siddham.js":1469,"./Script_Extensions/SignWriting.js":1470,"./Script_Extensions/Sinhala.js":1471,"./Script_Extensions/Sogdian.js":1472,"./Script_Extensions/Sora_Sompeng.js":1473,"./Script_Extensions/Soyombo.js":1474,"./Script_Extensions/Sundanese.js":1475,"./Script_Extensions/Syloti_Nagri.js":1476,"./Script_Extensions/Syriac.js":1477,"./Script_Extensions/Tagalog.js":1478,"./Script_Extensions/Tagbanwa.js":1479,"./Script_Extensions/Tai_Le.js":1480,"./Script_Extensions/Tai_Tham.js":1481,"./Script_Extensions/Tai_Viet.js":1482,"./Script_Extensions/Takri.js":1483,"./Script_Extensions/Tamil.js":1484,"./Script_Extensions/Tangut.js":1485,"./Script_Extensions/Telugu.js":1486,"./Script_Extensions/Thaana.js":1487,"./Script_Extensions/Thai.js":1488,"./Script_Extensions/Tibetan.js":1489,"./Script_Extensions/Tifinagh.js":1490,"./Script_Extensions/Tirhuta.js":1491,"./Script_Extensions/Ugaritic.js":1492,"./Script_Extensions/Vai.js":1493,"./Script_Extensions/Wancho.js":1494,"./Script_Extensions/Warang_Citi.js":1495,"./Script_Extensions/Yi.js":1496,"./Script_Extensions/Zanabazar_Square.js":1497,"./index.js":1498,"./unicode-version.js":1499};function a(e){var t=i(e);return n(t)}function i(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=i,e.exports=a,a.id=1102},1626:function(e,t,n){},1912:function(e,t,n){},1913:function(e,t,n){},1916:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"sourceCodeTemplate",(function(){return xe})),n.d(r,"imports",(function(){return ke}));var a={};n.r(a),n.d(a,"sourceCodeTemplate",(function(){return Te})),n.d(a,"imports",(function(){return De}));var i={};n.r(i),n.d(i,"sourceCodeTemplate",(function(){return we})),n.d(i,"imports",(function(){return Ie}));var s={};n.r(s),n.d(s,"sourceCodeTemplate",(function(){return Pe})),n.d(s,"imports",(function(){return Re}));var o=n(1),u=n.n(o),c=n(11),l=n.n(c),p=n(109),d=n(78),m=n(26),h=n.n(m),y=n(47),f=n(31),b=n(40),g=n(45),S=n(29),j=n(46),v=n(106),E=n(137),x=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(g.a)(this,Object(S.a)(t).call(this,e))).state={},n}var n,r;return Object(j.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:(r=Object(y.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadFiles();case 2:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"loadFiles",value:(n=Object(y.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)("/playground/files");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({files:n.files});case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"render",value:function(){return this.state.files?u.a.createElement(p.a,{to:!this.state.files.length||1===this.state.files.length&&"Orders.js"===this.state.files[0].fileName?"/schema":"/build"}):u.a.createElement("div",{style:{textAlign:"center",padding:24}},u.a.createElement(E.a,null))}}]),t}(o.Component),k=n(205),_=n.n(k),C=n(206),T=n(48),D=n(43),M=n.n(D),O=n(142),w=function e(t,n){var r=n||{},a=r.retries,i=Object(O.a)(r,["retries"]);return a=a||0,Object(v.a)(t,i).then(function(){var e=Object(y.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(500!==t.status){e.next=6;break}return e.next=3,t.text();case 3:n=e.sent;try{r=JSON.parse(n),n=r.error}catch(e){}throw n;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(r){if("Network request failed"===r.message&&a>0)return e(t,{options:n,retries:a-1});throw r}))},I=n(92),A=n(136),P=n(19),R=function(){function e(t){if(Object(f.a)(this,e),!t)throw new Error("Empty source is provided");this.ast=e.parse(t)}return Object(b.a)(e,[{key:"mergeImport",value:function(e,t){var n=e.imports.find((function(e){return e.get("source").node.value===t.get("source").node.value&&(e.get("specifiers")[0]&&e.get("specifiers")[0].type)===(t.get("specifiers")[0]&&t.get("specifiers")[0].type)}));n?t.get("specifiers").forEach((function(e){n.get("specifiers").find((function(t){return(t.get("imported").node&&t.get("imported").node.name)===(e.get("imported").node&&e.get("imported").node.name)&&(t.get("local").node&&t.get("local").node.name)===(e.get("local").node&&e.get("local").node.name)}))||n.pushContainer("specifiers",e.node)})):(e.imports[e.imports.length-1].insertAfter(t.node),e.findAllImports())}},{key:"insertAnchor",value:function(e){return e.defaultExport}},{key:"mergeDefinition",value:function(e,t){var n=this;t.get("declarations").forEach((function(t){e.definitions.find((function(e){return"Identifier"===e.get("id").node.type&&"Identifier"===t.get("id").node.type&&t.get("id").node.name===e.get("id").node.name}))||n.insertAnchor(e).insertBefore(P.variableDeclaration("const",[t.node]))}))}},{key:"findImports",value:function(){return e.importsByAst(this.ast)}},{key:"findDefinitions",value:function(){return e.definitionsByAst(this.ast)}},{key:"mergeTo",value:function(e){var t=this,n=this.findImports(),r=this.findDefinitions();n.forEach((function(n){return t.mergeImport(e,n)})),r.forEach((function(n){return t.mergeDefinition(e,n)})),e.findAllImports(),e.findAllDefinitions()}}],[{key:"parse",value:function(e){return Object(A.parse)(e,{sourceType:"module",plugins:["jsx"]})}},{key:"importsByAst",value:function(e){var t=[];return M()(e,{ImportDeclaration:function(e){t.push(e)}}),t}},{key:"definitionsByAst",value:function(e){var t=[];return M()(e,{VariableDeclaration:function(e){"Program"===e.parent.type&&t.push(e)}}),t}}]),e}(),B={"react/App.js":'import React from "react";\nimport { ApolloProvider } from \'@apollo/react-hooks\';\nimport "antd/dist/antd.css";\nimport "./index.css";\nimport { Layout } from "antd";\nimport client from "./graphql/client";\nimport Header from "./components/Header";\n\nconst AppLayout = ({ children }) => (\n  <Layout\n    style={{\n      height: "100%"\n    }}\n  >\n    <Header/>\n    <Layout.Content>{children}</Layout.Content>\n  </Layout>\n);\n\nconst App = ({ children }) => (\n  <ApolloProvider client={client}>\n    <AppLayout>\n      {children}\n    </AppLayout>\n  </ApolloProvider>\n);\n\nexport default App;\n',"react/index.js":"import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter as Router, Route } from 'react-router-dom';\nimport cubejs from '@cubejs-client/core';\nimport ExplorePage from './pages/ExplorePage';\nimport DashboardPage from './pages/DashboardPage';\nimport App from './App';\n\n// change to your actual endpoint\nconst API_URL = undefined;\n// should be refreshed by your backend API endpoint. More info: https://cube.dev/docs/security\nconst CUBEJS_TOKEN = undefined;\n\nconst cubejsApi = cubejs(\n  CUBEJS_TOKEN,\n  { apiUrl: `${API_URL}/cubejs-api/v1` }\n);\n\nReactDOM.render(\n  <Router>\n    <App>\n      <Route\n        key=\"index\"\n        exact\n        path=\"/\"\n        render={(props) => <DashboardPage {...props} cubejsApi={cubejsApi}/>}\n      />\n      <Route\n        key=\"explore\"\n        path=\"/explore\"\n        render={(props) => <ExplorePage {...props} cubejsApi={cubejsApi}/>}\n      />\n    </App>\n  </Router>,\n  // eslint-disable-next-line no-undef\n  document.getElementById('root')\n);\n","react/pages/DashboardPage.js":'import React from "react";\nimport {\n  Card, Spin, Button, Menu, Dropdown, Alert, Modal\n} from "antd";\nimport { Link } from "react-router-dom";\nimport { useQuery, useMutation } from "@apollo/react-hooks";\nimport RGL, { WidthProvider } from "react-grid-layout";\nimport "react-grid-layout/css/styles.css";\nimport "react-resizable/css/styles.css";\nimport {\n  GET_DASHBOARD_ITEMS\n} from "../graphql/queries";\nimport {\n  UPDATE_DASHBOARD_ITEM,\n  DELETE_DASHBOARD_ITEM\n} from "../graphql/mutations";\nimport ChartRenderer from "../components/ChartRenderer";\n\nconst ReactGridLayout = WidthProvider(RGL);\n\nconst deserializeItem = i => ({\n  ...i,\n  layout: JSON.parse(i.layout) || {},\n  vizState: JSON.parse(i.vizState)\n});\n\nconst defaultLayout = i => ({\n  x: i.layout.x || 0,\n  y: i.layout.y || 0,\n  w: i.layout.w || 4,\n  h: i.layout.h || 8,\n  minW: 4,\n  minH: 8\n});\n\nconst Dashboard = ({ children, dashboardItems }) => {\n  const [updateDashboardItem] = useMutation(UPDATE_DASHBOARD_ITEM, {\n    refetchQueries: [\n      {\n        query: GET_DASHBOARD_ITEMS\n      }\n    ]\n  });\n\n  const onLayoutChange = newLayout => {\n    newLayout.forEach(l => {\n      const item = dashboardItems.find(i => i.id.toString() === l.i);\n      const toUpdate = JSON.stringify({\n        x: l.x,\n        y: l.y,\n        w: l.w,\n        h: l.h\n      });\n\n      if (item && toUpdate !== item.layout) {\n        updateDashboardItem({\n          variables: {\n            id: item.id,\n            input: { layout: toUpdate }\n          }\n        });\n      }\n    });\n  };\n\n  return (\n    <ReactGridLayout cols={12} rowHeight={50} onLayoutChange={onLayoutChange}>\n      {children}\n    </ReactGridLayout>\n  );\n};\n\nconst DashboardItemDropdown = ({ itemId }) => {\n  const [removeDashboardItem] = useMutation(DELETE_DASHBOARD_ITEM, {\n    refetchQueries: [\n      {\n        query: GET_DASHBOARD_ITEMS\n      }\n    ]\n  });\n  const dashboardItemDropdownMenu = (\n    <Menu>\n      <Menu.Item>\n        <Link to={`/explore?itemId=${itemId}`}>Edit</Link>\n      </Menu.Item>\n      <Menu.Item\n        onClick={() =>\n          Modal.confirm({\n            title: "Are you sure you want to delete this item?",\n            okText: "Yes",\n            okType: "danger",\n            cancelText: "No",\n\n            onOk() {\n              removeDashboardItem({\n                variables: {\n                  id: itemId\n                }\n              });\n            }\n          })\n        }\n      >\n        Delete\n      </Menu.Item>\n    </Menu>\n  );\n  return (\n    <Dropdown\n      overlay={dashboardItemDropdownMenu}\n      placement="bottomLeft"\n      trigger={["click"]}\n    >\n      <Button shape="circle" icon="menu" />\n    </Dropdown>\n  );\n};\n\nconst DashboardItem = ({ itemId, children, title }) => (\n  <Card\n    title={title}\n    style={{\n      height: "100%",\n      width: "100%"\n    }}\n    extra={<DashboardItemDropdown itemId={itemId} />}\n  >\n    {children}\n  </Card>\n);\n\nconst DashboardPage = ({ cubejsApi }) => {\n  const { loading, error, data } = useQuery(GET_DASHBOARD_ITEMS);\n\n  if (loading) {\n    return <Spin />;\n  }\n\n  if (error) {\n    return (\n      <Alert\n        message="Error occured while loading your query"\n        description={error.toString()}\n        type="error"\n      />\n    );\n  }\n\n  const dashboardItem = item => (\n    <div key={item.id} data-grid={defaultLayout(item)}>\n      <DashboardItem key={item.id} itemId={item.id} title={item.name}>\n        <ChartRenderer vizState={item.vizState} cubejsApi={cubejsApi} />\n      </DashboardItem>\n    </div>\n  );\n\n  return !data || data.dashboardItems.length ? (\n    <Dashboard dashboardItems={data && data.dashboardItems}>\n      {data && data.dashboardItems.map(deserializeItem).map(dashboardItem)}\n    </Dashboard>\n  ) : (\n    <div\n      style={{\n        textAlign: "center",\n        padding: 12\n      }}\n    >\n      <h2>There are no charts on this dashboard</h2>\n      <Link to="/explore">\n        <Button type="primary" size="large" icon="plus">\n          Add chart\n        </Button>\n      </Link>\n    </div>\n  );\n};\n\nexport default DashboardPage;\n',"react/pages/ExplorePage.js":'import React, { useState } from "react";\nimport {\n  Button, Modal, Input, Alert, Spin\n} from "antd";\nimport { useMutation, useQuery } from "@apollo/react-hooks";\nimport { withRouter } from "react-router-dom";\nimport ExploreQueryBuilder from "../components/QueryBuilder/ExploreQueryBuilder";\nimport {\n  GET_DASHBOARD_ITEMS,\n  GET_DASHBOARD_ITEM\n} from "../graphql/queries";\nimport {\n  CREATE_DASHBOARD_ITEM,\n  UPDATE_DASHBOARD_ITEM\n} from "../graphql/mutations";\n\nconst ExplorePage = withRouter(({ cubejsApi, history, location }) => {\n  const [addDashboardItem] = useMutation(CREATE_DASHBOARD_ITEM, {\n    refetchQueries: [\n      {\n        query: GET_DASHBOARD_ITEMS\n      }\n    ]\n  });\n  const [updateDashboardItem] = useMutation(UPDATE_DASHBOARD_ITEM, {\n    refetchQueries: [\n      {\n        query: GET_DASHBOARD_ITEMS\n      }\n    ]\n  });\n  const [addingToDashboard, setAddingToDashboard] = useState(false);\n  const params = new URLSearchParams(location.search);\n  const itemId = params.get("itemId");\n  const { loading, error, data } = useQuery(GET_DASHBOARD_ITEM, {\n    variables: {\n      id: itemId\n    },\n    skip: !itemId\n  });\n\n  const [vizState, setVizState] = useState(null);\n  const finalVizState =\n    vizState ||\n    (itemId && !loading && data && JSON.parse(data.dashboardItem.vizState)) ||\n    {};\n  const [titleModalVisible, setTitleModalVisible] = useState(false);\n  const [title, setTitle] = useState(null);\n  const finalTitle = title != null ? title\n    : ((itemId && !loading && data && data.dashboardItem.name) || "New Chart");\n\n  if (loading) {\n    return <Spin />;\n  }\n\n  if (error) {\n    return <Alert type="error" message={error.toString()} />;\n  }\n\n  const titleModal = (\n    <Modal\n      key="modal"\n      title="Save Chart"\n      visible={titleModalVisible}\n      onOk={async () => {\n        setTitleModalVisible(false);\n        setAddingToDashboard(true);\n\n        try {\n          await (itemId ? updateDashboardItem : addDashboardItem)({\n            variables: {\n              id: itemId,\n              input: {\n                vizState: JSON.stringify(finalVizState),\n                name: finalTitle\n              }\n            }\n          });\n          history.push("/");\n        } finally {\n          setAddingToDashboard(false);\n        }\n      }}\n      onCancel={() => setTitleModalVisible(false)}\n    >\n      <Input\n        placeholder="Dashboard Item Name"\n        value={finalTitle}\n        onChange={e => setTitle(e.target.value)}\n      />\n    </Modal>\n  );\n  const addToDashboardButton = (\n    <Button\n      key="button"\n      icon={itemId ? "save" : "plus"}\n      size="small"\n      loading={addingToDashboard}\n      onClick={() => setTitleModalVisible(true)}\n    >\n      {itemId ? "Update" : "Add to Dashboard"}\n    </Button>\n  );\n  return (\n    <ExploreQueryBuilder\n      cubejsApi={cubejsApi}\n      vizState={finalVizState}\n      setVizState={setVizState}\n      chartExtra={[addToDashboardButton, titleModal]}\n    />\n  );\n});\nexport default ExplorePage;\n',"react/graphql/client.js":'/* globals window */\nimport { ApolloClient } from "apollo-client";\nimport { InMemoryCache } from "apollo-cache-inmemory";\nimport { SchemaLink } from \'apollo-link-schema\';\nimport { makeExecutableSchema } from \'graphql-tools\';\n\nconst cache = new InMemoryCache();\nconst defaultDashboardItems = [];\n\nconst getDashboardItems = () => JSON.parse(window.localStorage.getItem("dashboardItems"))\n  || defaultDashboardItems;\n\nconst setDashboardItems = items => window.localStorage.setItem("dashboardItems", JSON.stringify(items));\n\nconst nextId = () => {\n  const currentId = parseInt(window.localStorage.getItem("dashboardIdCounter"), 10) || 1;\n  window.localStorage.setItem("dashboardIdCounter", currentId + 1);\n  return currentId.toString();\n};\n\nconst toApolloItem = i => ({\n  ...i,\n  __typename: "DashboardItem"\n});\n\nconst typeDefs = `\n  type DashboardItem {\n    id: String!\n    layout: String\n    vizState: String\n    name: String\n  }\n\n  input DashboardItemInput {\n    layout: String\n    vizState: String\n    name: String\n  }\n\n  type Query {\n    dashboardItems: [DashboardItem]\n    dashboardItem(id: String!): DashboardItem\n  }\n\n  type Mutation {\n    createDashboardItem(input: DashboardItemInput): DashboardItem\n    updateDashboardItem(id: String!, input: DashboardItemInput): DashboardItem\n    deleteDashboardItem(id: String!): DashboardItem\n  }\n`;\n\nconst schema = makeExecutableSchema({\n  typeDefs,\n  resolvers: {\n    Query: {\n      dashboardItems() {\n        const dashboardItems = getDashboardItems();\n        return dashboardItems.map(toApolloItem);\n      },\n      dashboardItem(_, { id }) {\n        const dashboardItems = getDashboardItems();\n        return toApolloItem(dashboardItems.find(i => i.id.toString() === id));\n      }\n    },\n    Mutation: {\n      createDashboardItem: (_, { input: { ...item } }) => {\n        const dashboardItems = getDashboardItems();\n        item = { ...item, id: nextId(), layout: JSON.stringify({}) };\n        dashboardItems.push(item);\n        setDashboardItems(dashboardItems);\n        return toApolloItem(item);\n      },\n      updateDashboardItem: (_, { id, input: { ...item } }) => {\n        const dashboardItems = getDashboardItems();\n        item = Object.keys(item)\n          .filter(k => !!item[k])\n          .map(k => ({\n            [k]: item[k]\n          }))\n          .reduce((a, b) => ({ ...a, ...b }), {});\n        const index = dashboardItems.findIndex(i => i.id.toString() === id);\n        dashboardItems[index] = { ...dashboardItems[index], ...item };\n        setDashboardItems(dashboardItems);\n        return toApolloItem(dashboardItems[index]);\n      },\n      deleteDashboardItem: (_, { id }) => {\n        const dashboardItems = getDashboardItems();\n        const index = dashboardItems.findIndex(i => i.id.toString() === id);\n        const [removedItem] = dashboardItems.splice(index, 1);\n        setDashboardItems(dashboardItems);\n        return toApolloItem(removedItem);\n      }\n    }\n  }\n});\n\nexport default new ApolloClient({\n  cache,\n  link: new SchemaLink({ schema })\n});\n',"react/graphql/mutations.js":'import gql from "graphql-tag";\n\nexport const CREATE_DASHBOARD_ITEM = gql`\n  mutation CreateDashboardItem($input: DashboardItemInput) {\n    createDashboardItem(input: $input) {\n      id\n      layout\n      vizState\n      name\n    }\n  }\n`;\n\nexport const UPDATE_DASHBOARD_ITEM = gql`\n  mutation UpdateDashboardItem($id: String!, $input: DashboardItemInput) {\n    updateDashboardItem(id: $id, input: $input) {\n      id\n      layout\n      vizState\n      name\n    }\n  }\n`;\n\nexport const DELETE_DASHBOARD_ITEM = gql`\n  mutation DeleteDashboardItem($id: String!) {\n    deleteDashboardItem(id: $id) {\n      id\n      layout\n      vizState\n      name\n    }\n  }\n`;\n',"react/graphql/queries.js":'import gql from "graphql-tag";\n\nexport const GET_DASHBOARD_ITEMS = gql`\n  query GetDashboardItems {\n    dashboardItems {\n      id\n      layout\n      vizState\n      name\n    }\n  }\n`;\n\nexport const GET_DASHBOARD_ITEM = gql`\n  query GetDashboardItem($id: String!) {\n    dashboardItem(id: $id) {\n      id\n      layout\n      vizState\n      name\n    }\n  }\n`;\n',"react/components/ChartRenderer.js":"import React from 'react';\nimport PropTypes from 'prop-types';\nimport { QueryRenderer } from '@cubejs-client/react';\nimport { Spin } from 'antd';\n\nconst TypeToChartComponent = {};\n\nconst renderChart = (Component) => ({ resultSet, error }) => (\n  (resultSet && <Component resultSet={resultSet} />)\n  || (error && error.toString())\n  || (<Spin />)\n);\n\nconst ChartRenderer = ({ vizState, cubejsApi }) => vizState && (\n  <QueryRenderer\n    updateOnlyOnStateChange\n    query={vizState.query}\n    cubejsApi={cubejsApi}\n    render={\n      TypeToChartComponent[vizState.chartType]\n      && renderChart(TypeToChartComponent[vizState.chartType])\n    }\n  />\n);\n\nChartRenderer.propTypes = {\n  vizState: PropTypes.object,\n  cubejsApi: PropTypes.object.isRequired\n};\n\nChartRenderer.defaultProps = {\n  vizState: null\n};\n\n\nexport default ChartRenderer;\n","react/components/Header.js":'import React from "react";\nimport { Link } from "react-router-dom";\nimport { withRouter } from "react-router";\nimport { Layout, Menu } from "antd";\n\nconst Header = ({ location }) => (\n  <Layout.Header\n    style={{\n      padding: "0 32px"\n    }}\n  >\n    <div\n      style={{\n        float: "left"\n      }}\n    >\n      <h2\n        style={{\n          color: "#fff",\n          margin: 0,\n          marginRight: "1em",\n          display: "inline",\n          width: 100,\n          lineHeight: "54px"\n        }}\n      >\n        My Dashboard\n      </h2>\n    </div>\n    <Menu\n      theme="dark"\n      mode="horizontal"\n      selectedKeys={[location.pathname]}\n      style={{\n        lineHeight: "64px"\n      }}\n    >\n      <Menu.Item key="/explore">\n        <Link to="/explore">Explore</Link>\n      </Menu.Item>\n      <Menu.Item key="/">\n        <Link to="/">Dashboard</Link>\n      </Menu.Item>\n    </Menu>\n  </Layout.Header>\n);\n\nexport default withRouter(Header);\n',"react/components/QueryBuilder/ButtonDropdown.js":"import React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { Button, Dropdown } from 'antd';\n\nconst ButtonDropdown = ({ overlay, ...buttonProps }) => (\n  <Dropdown overlay={overlay} placement=\"bottomLeft\" trigger={['click']}>\n    <Button {...buttonProps} />\n  </Dropdown>\n);\n\nButtonDropdown.propTypes = {\n  overlay: PropTypes.object.isRequired\n};\n\nexport default ButtonDropdown;\n","react/components/QueryBuilder/ExploreQueryBuilder.js":'import React from \'react\';\nimport * as PropTypes from \'prop-types\';\nimport {\n  Row, Col, Divider, Card\n} from \'antd\';\nimport { QueryBuilder } from \'@cubejs-client/react\';\nimport ChartRenderer from \'../ChartRenderer\';\nimport MemberGroup from \'./MemberGroup\';\nimport FilterGroup from \'./FilterGroup\';\nimport TimeGroup from \'./TimeGroup\';\nimport SelectChartType from \'./SelectChartType\';\n\nconst ExploreQueryBuilder = ({\n  vizState, cubejsApi, setVizState, chartExtra\n}) => (\n  <QueryBuilder\n    vizState={vizState}\n    setVizState={setVizState}\n    cubejsApi={cubejsApi}\n    render={({\n      validatedQuery, isQueryPresent, chartType, updateChartType,\n      measures, availableMeasures, updateMeasures,\n      dimensions, availableDimensions, updateDimensions,\n      segments, availableSegments, updateSegments,\n      filters, updateFilters,\n      timeDimensions, availableTimeDimensions, updateTimeDimensions\n    }) => [\n      <Row type="flex" justify="space-around" align="top" gutter={24} style={{ marginBottom: 12 }} key="1">\n        <Col span={24}>\n          <Card>\n            <Row type="flex" justify="space-around" align="top" gutter={24} style={{ marginBottom: 12 }}>\n              <Col span={24}>\n                <MemberGroup\n                  members={measures}\n                  availableMembers={availableMeasures}\n                  addMemberName="Measure"\n                  updateMethods={updateMeasures}\n                />\n                <Divider type="vertical"/>\n                <MemberGroup\n                  members={dimensions}\n                  availableMembers={availableDimensions}\n                  addMemberName="Dimension"\n                  updateMethods={updateDimensions}\n                />\n                <Divider type="vertical"/>\n                <MemberGroup\n                  members={segments}\n                  availableMembers={availableSegments}\n                  addMemberName="Segment"\n                  updateMethods={updateSegments}\n                />\n                <Divider type="vertical"/>\n                <TimeGroup\n                  members={timeDimensions}\n                  availableMembers={availableTimeDimensions}\n                  addMemberName="Time"\n                  updateMethods={updateTimeDimensions}\n                />\n              </Col>\n            </Row>\n            <Row type="flex" justify="space-around" align="top" gutter={24} style={{ marginBottom: 12 }}>\n              <Col span={24}>\n                <FilterGroup\n                  members={filters}\n                  availableMembers={availableDimensions.concat(availableMeasures)}\n                  addMemberName="Filter"\n                  updateMethods={updateFilters}\n                />\n              </Col>\n            </Row>\n            <Row type="flex" justify="space-around" align="top" gutter={24}>\n              <Col span={24}>\n                <SelectChartType\n                  chartType={chartType}\n                  updateChartType={updateChartType}\n                />\n              </Col>\n            </Row>\n          </Card>\n        </Col>\n      </Row>,\n      <Row type="flex" justify="space-around" align="top" gutter={24} key="2">\n        <Col span={24}>\n          {isQueryPresent ? (\n            <Card\n              style={{ minHeight: 420 }}\n              extra={chartExtra}\n            >\n              <ChartRenderer\n                vizState={{ query: validatedQuery, chartType }}\n                cubejsApi={cubejsApi}\n              />\n            </Card>\n          ) : <h2 style={{ textAlign: \'center\' }}>Choose a measure or dimension to get started</h2>}\n        </Col>\n      </Row>\n    ]}\n  />\n);\n\nExploreQueryBuilder.propTypes = {\n  vizState: PropTypes.object,\n  setVizState: PropTypes.func,\n  cubejsApi: PropTypes.object,\n  chartExtra: PropTypes.array\n};\n\nExploreQueryBuilder.defaultProps = {\n  vizState: {},\n  setVizState: null,\n  cubejsApi: null,\n  chartExtra: null\n};\n\nexport default ExploreQueryBuilder;\n',"react/components/QueryBuilder/FilterGroup.js":"import React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { Select } from 'antd';\nimport MemberDropdown from './MemberDropdown';\nimport RemoveButtonGroup from './RemoveButtonGroup';\nimport FilterInput from './FilterInput';\n\nconst FilterGroup = ({\n  members, availableMembers, addMemberName, updateMethods\n}) => (\n  <span>\n    {members.map(m => (\n      <div style={{ marginBottom: 12 }} key={m.index}>\n        <RemoveButtonGroup onRemoveClick={() => updateMethods.remove(m)}>\n          <MemberDropdown\n            onClick={updateWith => updateMethods.update(m, { ...m, dimension: updateWith })}\n            availableMembers={availableMembers}\n            style={{\n              width: 150,\n              textOverflow: 'ellipsis',\n              overflow: 'hidden'\n            }}\n          >\n            {m.dimension.title}\n          </MemberDropdown>\n        </RemoveButtonGroup>\n        <Select\n          value={m.operator}\n          onChange={(operator) => updateMethods.update(m, { ...m, operator })}\n          style={{ width: 200, marginRight: 8 }}\n        >\n          {m.operators.map(operator => (\n            <Select.Option\n              key={operator.name}\n              value={operator.name}\n            >\n              {operator.title}\n            </Select.Option>\n          ))}\n        </Select>\n        <FilterInput member={m} key=\"filterInput\" updateMethods={updateMethods}/>\n      </div>\n    ))}\n    <MemberDropdown\n      onClick={(m) => updateMethods.add({ dimension: m })}\n      availableMembers={availableMembers}\n      type=\"dashed\"\n      icon=\"plus\"\n    >\n      {addMemberName}\n    </MemberDropdown>\n  </span>\n);\n\nFilterGroup.propTypes = {\n  members: PropTypes.array.isRequired,\n  availableMembers: PropTypes.array.isRequired,\n  addMemberName: PropTypes.string.isRequired,\n  updateMethods: PropTypes.object.isRequired\n};\n\nexport default FilterGroup;\n","react/components/QueryBuilder/FilterInput.js":"import React from 'react';\nimport * as PropTypes from 'prop-types';\nimport {\n  Select, Input\n} from 'antd';\n\nconst FilterInputs = {\n  string: ({ values, onChange }) => (\n    <Select key=\"input\" style={{ width: 300 }} mode=\"tags\" onChange={onChange} value={values} />\n  ),\n  number: ({ values, onChange }) => (\n    <Input\n      key=\"input\"\n      style={{ width: 300 }}\n      onChange={e => onChange([e.target.value])}\n      value={values && values[0] || ''}\n    />\n  )\n};\n\nFilterInputs.string.propTypes = {\n  values: PropTypes.array,\n  onChange: PropTypes.func.isRequired\n};\n\nFilterInputs.string.defaultProps = {\n  values: []\n};\n\nFilterInputs.number.propTypes = {\n  values: PropTypes.array,\n  onChange: PropTypes.func.isRequired\n};\n\nFilterInputs.number.defaultProps = {\n  values: []\n};\n\nconst FilterInput = ({ member, updateMethods }) => {\n  const Filter = FilterInputs[member.dimension.type] || FilterInputs.string;\n  return (\n    <Filter\n      key=\"filter\"\n      values={member.values}\n      onChange={(values) => updateMethods.update(member, { ...member, values })}\n    />\n  );\n};\n\nFilterInput.propTypes = {\n  member: PropTypes.object.isRequired,\n  updateMethods: PropTypes.object.isRequired\n};\n\nexport default FilterInput;\n","react/components/QueryBuilder/MemberDropdown.js":"import React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { Menu } from 'antd';\nimport ButtonDropdown from './ButtonDropdown';\n\n// Can't be a Pure Component due to Dropdown lookups overlay component type to set appropriate styles\nconst memberMenu = (onClick, availableMembers) => (\n  <Menu>\n    {availableMembers.length ? availableMembers.map(m => (\n      <Menu.Item key={m.name} onClick={() => onClick(m)}>\n        {m.title}\n      </Menu.Item>\n    )) : <Menu.Item disabled>No members found</Menu.Item>}\n  </Menu>\n);\n\nconst MemberDropdown = ({ onClick, availableMembers, ...buttonProps }) => (\n  <ButtonDropdown overlay={memberMenu(onClick, availableMembers)} {...buttonProps} />\n);\n\nMemberDropdown.propTypes = {\n  onClick: PropTypes.func.isRequired,\n  availableMembers: PropTypes.array.isRequired\n};\n\nexport default MemberDropdown;\n","react/components/QueryBuilder/MemberGroup.js":"import React from 'react';\nimport * as PropTypes from 'prop-types';\nimport MemberDropdown from './MemberDropdown';\nimport RemoveButtonGroup from './RemoveButtonGroup';\n\nconst MemberGroup = ({\n  members, availableMembers, addMemberName, updateMethods\n}) => (\n  <span>\n    {members.map(m => (\n      <RemoveButtonGroup key={m.index || m.name} onRemoveClick={() => updateMethods.remove(m)}>\n        <MemberDropdown availableMembers={availableMembers} onClick={updateWith => updateMethods.update(m, updateWith)}>\n          {m.title}\n        </MemberDropdown>\n      </RemoveButtonGroup>\n    ))}\n    <MemberDropdown onClick={m => updateMethods.add(m)} availableMembers={availableMembers} type=\"dashed\" icon=\"plus\">\n      {addMemberName}\n    </MemberDropdown>\n  </span>\n);\n\nMemberGroup.propTypes = {\n  members: PropTypes.array.isRequired,\n  availableMembers: PropTypes.array.isRequired,\n  addMemberName: PropTypes.string.isRequired,\n  updateMethods: PropTypes.object.isRequired\n};\n\nexport default MemberGroup;\n","react/components/QueryBuilder/RemoveButtonGroup.js":"import React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { Button, Icon } from 'antd';\n\nconst RemoveButtonGroup = ({ onRemoveClick, children, ...props }) => (\n  <Button.Group style={{ marginRight: 8 }} {...props}>\n    {children}\n    <Button\n      type=\"danger\"\n      ghost\n      onClick={onRemoveClick}\n    >\n      <Icon type=\"close\" />\n    </Button>\n  </Button.Group>\n);\n\nRemoveButtonGroup.propTypes = {\n  onRemoveClick: PropTypes.func.isRequired,\n  children: PropTypes.object.isRequired\n};\n\nexport default RemoveButtonGroup;\n","react/components/QueryBuilder/SelectChartType.js":"import React from 'react';\nimport * as PropTypes from 'prop-types';\nimport {\n  Menu, Icon\n} from 'antd';\nimport ButtonDropdown from './ButtonDropdown';\n\nconst ChartTypes = [\n  { name: 'line', title: 'Line', icon: 'line-chart' },\n  { name: 'area', title: 'Area', icon: 'area-chart' },\n  { name: 'bar', title: 'Bar', icon: 'bar-chart' },\n  { name: 'pie', title: 'Pie', icon: 'pie-chart' },\n  { name: 'table', title: 'Table', icon: 'table' },\n  { name: 'number', title: 'Number', icon: 'info-circle' }\n];\n\nconst SelectChartType = ({ chartType, updateChartType }) => {\n  const menu = (\n    <Menu>\n      {ChartTypes.map(m => (\n        <Menu.Item key={m.title} onClick={() => updateChartType(m.name)}>\n          <Icon type={m.icon} />\n          {m.title}\n        </Menu.Item>\n      ))}\n    </Menu>\n  );\n\n  const foundChartType = ChartTypes.find(t => t.name === chartType);\n  return (\n    <ButtonDropdown overlay={menu} icon={foundChartType.icon}>\n      {foundChartType.title}\n    </ButtonDropdown>\n  );\n};\n\nSelectChartType.propTypes = {\n  chartType: PropTypes.string.isRequired,\n  updateChartType: PropTypes.func.isRequired\n};\n\nexport default SelectChartType;\n","react/components/QueryBuilder/TimeGroup.js":"import React from 'react';\nimport * as PropTypes from 'prop-types';\nimport {\n  Menu\n} from 'antd';\nimport ButtonDropdown from './ButtonDropdown';\nimport MemberDropdown from './MemberDropdown';\nimport RemoveButtonGroup from './RemoveButtonGroup';\n\nconst DateRanges = [\n  { title: 'All time', value: undefined },\n  { value: 'Today' },\n  { value: 'Yesterday' },\n  { value: 'This week' },\n  { value: 'This month' },\n  { value: 'This quarter' },\n  { value: 'This year' },\n  { value: 'Last 7 days' },\n  { value: 'Last 30 days' },\n  { value: 'Last week' },\n  { value: 'Last month' },\n  { value: 'Last quarter' },\n  { value: 'Last year' }\n];\n\nconst TimeGroup = ({\n  members, availableMembers, addMemberName, updateMethods\n}) => {\n  const granularityMenu = (member, onClick) => (\n    <Menu>\n      {member.granularities.length ? member.granularities.map(m => (\n        <Menu.Item key={m.title} onClick={() => onClick(m)}>\n          {m.title}\n        </Menu.Item>\n      )) : <Menu.Item disabled>No members found</Menu.Item>}\n    </Menu>\n  );\n\n  const dateRangeMenu = (onClick) => (\n    <Menu>\n      {DateRanges.map(m => (\n        <Menu.Item key={m.title || m.value} onClick={() => onClick(m)}>\n          {m.title || m.value}\n        </Menu.Item>\n      ))}\n    </Menu>\n  );\n\n  return (\n    <span>\n      {members.map(m => [\n        <RemoveButtonGroup onRemoveClick={() => updateMethods.remove(m)} key={`${m.dimension.name}-member`}>\n          <MemberDropdown\n            onClick={updateWith => updateMethods.update(m, { ...m, dimension: updateWith })}\n            availableMembers={availableMembers}\n          >\n            {m.dimension.title}\n          </MemberDropdown>\n        </RemoveButtonGroup>,\n        <b key={`${m.dimension.name}-for`}>FOR</b>,\n        <ButtonDropdown\n          overlay={dateRangeMenu(dateRange => updateMethods.update(m, { ...m, dateRange: dateRange.value }))}\n          style={{ marginLeft: 8, marginRight: 8 }}\n          key={`${m.dimension.name}-date-range`}\n        >\n          {m.dateRange || 'All time'}\n        </ButtonDropdown>,\n        <b key={`${m.dimension.name}-by`}>BY</b>,\n        <ButtonDropdown\n          overlay={granularityMenu(\n            m.dimension,\n            granularity => updateMethods.update(m, { ...m, granularity: granularity.name })\n          )}\n          style={{ marginLeft: 8 }}\n          key={`${m.dimension.name}-granularity`}\n        >\n          {\n            m.dimension.granularities.find(g => g.name === m.granularity)\n            && m.dimension.granularities.find(g => g.name === m.granularity).title\n          }\n        </ButtonDropdown>\n      ])}\n      {!members.length && (\n        <MemberDropdown\n          onClick={member => updateMethods.add({ dimension: member, granularity: 'day' })}\n          availableMembers={availableMembers}\n          type=\"dashed\"\n          icon=\"plus\"\n        >\n          {addMemberName}\n        </MemberDropdown>\n      )}\n    </span>\n  );\n};\n\nTimeGroup.propTypes = {\n  members: PropTypes.array.isRequired,\n  availableMembers: PropTypes.array.isRequired,\n  addMemberName: PropTypes.string.isRequired,\n  updateMethods: PropTypes.object.isRequired\n};\n\nexport default TimeGroup;\n"},q=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(S.a)(t).call(this,B["react/App.js"]))}return Object(j.a)(t,e),Object(b.a)(t,[{key:"findDefinitions",value:function(){return Object(I.a)(Object(S.a)(t.prototype),"findDefinitions",this).call(this).filter((function(e){return"App"!==e.get("declarations")[0].get("id").get("name").node}))}},{key:"mergeTo",value:function(e){Object(I.a)(Object(S.a)(t.prototype),"mergeTo",this).call(this,e);var n=Object(I.a)(Object(S.a)(t.prototype),"findDefinitions",this).call(this).find((function(e){return"App"===e.get("declarations")[0].get("id").get("name").node}));this.insertAnchor(e).replaceWith(n)}},{key:"insertAnchor",value:function(e){var t=null;if(M()(e.ast,{FunctionDeclaration:function(e){"App"===e.get("id").node.name&&(t=e)}}),!t)throw new Error("App class not found. Can't parse dashboard app.  Please delete dashboard-app directory and try to create it again.");return t}}]),t}(R),L=n(707),G=n(247),N=n.n(G),F=n(980),Q=[n(981)],H=function(){function e(t,n){Object(f.a)(this,e),this.source=n,this.fileName=t,this.ast=Object(A.parse)(n,{sourceFilename:t,sourceType:"module",plugins:["jsx"]}),this.findAllImports(),this.findAllDefinitions(),this.findDefaultExport()}return Object(b.a)(e,[{key:"findAllImports",value:function(){var e=this;this.imports=[],M()(this.ast,{ImportDeclaration:function(t){e.imports.push(t)}})}},{key:"findDefaultExport",value:function(){var e=this;M()(this.ast,{ExportDefaultDeclaration:function(t){t&&(e.defaultExport=t)}})}},{key:"findAllDefinitions",value:function(){var e=this;this.definitions=[],M()(this.ast,{VariableDeclaration:function(t){var n;"Program"===t.parent.type&&(n=e.definitions).push.apply(n,Object(L.a)(t.get("declarations")))}})}},{key:"code",value:function(){return this.ast&&N()(this.ast,{},this.source).code}},{key:"formattedCode",value:function(){return F.format(this.code(),{parser:"babylon",plugins:Q})}}]),e}(),z=function(){function e(t,n,r){Object(f.a)(this,e),this.targetFileName=t,this.scaffoldingSourceName=e.scaffoldingSourceName(t),this.targetSource=n&&new H(t,n),this.snippet=r||new R(B[this.scaffoldingSourceName])}return Object(b.a)(e,[{key:"formattedMergeResult",value:function(){return this.targetSource?(this.snippet.mergeTo(this.targetSource),this.targetSource.formattedCode()):B[this.scaffoldingSourceName]}}],[{key:"scaffoldingSourceName",value:function(e){return e.replace("/src/","react/")}},{key:"targetSourceName",value:function(e){return e.replace("react/","/src/")}}]),e}(),V=function(e){function t(e){var n,r=e.apiUrl,a=e.cubejsToken;return Object(f.a)(this,t),(n=Object(g.a)(this,Object(S.a)(t).call(this,B["react/index.js"]))).apiUrl=r,n.cubejsToken=a,n}return Object(j.a)(t,e),Object(b.a)(t,[{key:"mergeTo",value:function(e){Object(I.a)(Object(S.a)(t.prototype),"mergeTo",this).call(this,e),this.replaceRouter(e),this.replaceTokens(e)}},{key:"replaceRouter",value:function(e){var t=null;if(M()(e.ast,{JSXOpeningElement:function(e){"Router"===e.get("name").get("name").node&&(t=e)}}),!t){if(M()(this.ast,{JSXOpeningElement:function(e){"Router"===e.get("name").get("name").node&&(t=e)}}),!t)throw new Error("Router element is not found");this.findAppOrRouter(e).replaceWith(t.parentPath)}}},{key:"replaceTokens",value:function(e){e.definitions.find((function(e){return"API_URL"===e.get("id").node.name})).get("init").replaceWith(P.stringLiteral(this.apiUrl)),e.definitions.find((function(e){return"CUBEJS_TOKEN"===e.get("id").node.name})).get("init").replaceWith(P.stringLiteral(this.cubejsToken))}},{key:"findAppOrRouter",value:function(e){var t=null;if(M()(e.ast,{JSXOpeningElement:function(e){"Router"!==e.get("name").get("name").node&&"App"!==e.get("name").get("name").node||(t=e)}}),!t)throw new Error("App class not found. Can't parse dashboard app.  Please delete dashboard-app directory and try to create it again.");return t.parentPath}},{key:"insertAnchor",value:function(e){return this.findAppOrRouter(e).parentPath.parentPath}}]),t}(R),U=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(S.a)(t).call(this,B["react/pages/ExplorePage.js"]))}return Object(j.a)(t,e),t}(R),K=n(708),Y=n(429),J=n.n(Y),W=n(670),$=n.n(W),X=n(671),Z=n.n(X),ee=n(207),te=n(70),ne=n(630),re=n(141),ae=n(59),ie=n(202),se=n(10),oe=n(604),ue=n(669),ce=n(672),le=n(1918),pe=n(673),de=n.n(pe),me=n(430),he=n.n(me),ye=(n(1626),function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(j.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){he.a.highlightAll()}},{key:"componentDidUpdate",value:function(){he.a.highlightAll()}},{key:"render",value:function(){return u.a.createElement("pre",{style:this.props.style},u.a.createElement("code",{className:"language-javascript"},this.props.code))}}]),t}(u.a.Component)),fe=function(e,t){window.analytics&&window.analytics.track(e,t)},be=function(e,t){fe("Playground Action",Object(T.a)({name:e},t))},ge=[{id:"vanilla",title:"Vanilla JavaScript",docsLink:"https://cube.dev/docs/@cubejs-client-core"},{id:"angular",title:"Angular",docsLink:"https://cube.dev/docs/@cubejs-client-ngx"},{id:"react",title:"React"},{id:"vue",title:"Vue.js",docsLink:"https://cube.dev/docs/@cubejs-client-vue"}],Se=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(g.a)(this,Object(S.a)(t).call(this,e))).state={showCode:!1,framework:"react"},n}var n;return Object(j.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:(n=Object(y.a)(h.a.mark((function e(){var t,n,r,a,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props,n=t.codeSandboxSource,r=t.dependencies,e.next=3,Object(v.a)("https://codesandbox.io/api/v1/sandboxes/define?json=1",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(this.codeSandboxDefinition(n,r))});case 3:return a=e.sent,e.next=6,a.json();case 6:i=e.sent,this.setState({sandboxId:i.sandbox_id});case 8:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"codeSandboxDefinition",value:function(e,t){return{files:Object(T.a)({},"string"==typeof e?{"index.js":{content:e}}:e,{"package.json":{content:{dependencies:Object(T.a)({"react-dom":"latest"},Object(le.a)((function(){return"latest"}),t))}}}),template:"create-react-app"}}},{key:"render",value:function(){var e=this,t=this.state,n=t.redirectToDashboard,r=t.showCode,a=t.sandboxId,i=(t.addingToDashboard,t.framework),s=this.props,o=s.resultSet,c=s.error,l=s.codeExample,d=s.render,m=s.codeSandboxSource,f=s.dependencies,b=(s.dashboardSource,s.hideActions),g=s.query,S=s.cubejsApi,j=s.chartLibrary,v=s.setChartLibrary,E=s.chartLibraries;if(n)return u.a.createElement(p.a,{to:"/dashboard"});var x,k=Object(ce.getParameters)(this.codeSandboxDefinition(m,f)),_=u.a.createElement(re.a,{onClick:function(e){be("Set Chart Library",{chartLibrary:e.key}),v(e.key)}},E.map((function(e){return u.a.createElement(re.a.Item,{key:e.value},e.title)}))),C=u.a.createElement(re.a,{onClick:function(t){be("Set Framework",{framework:t.key}),e.setState({framework:t.key})}},ge.map((function(e){return u.a.createElement(re.a.Item,{key:e.id},e.title)}))),T=E.find((function(e){return e.value===j})),D=ge.find((function(e){return e.id===i})),M=u.a.createElement("form",{action:"https://codesandbox.io/api/v1/sandboxes/define",method:"POST",target:"_blank"},u.a.createElement("input",{type:"hidden",name:"parameters",value:k}),u.a.createElement(ae.a.Group,null,u.a.createElement(ie.a,{overlay:C},u.a.createElement(ae.a,{size:"small"},D&&D.title,u.a.createElement(se.a,{type:"down"}))),u.a.createElement(ie.a,{overlay:_,disabled:!!D.docsLink},u.a.createElement(ae.a,{size:"small"},T&&T.title,u.a.createElement(se.a,{type:"down"}))),u.a.createElement(ae.a,{onClick:function(){be("Show Query"),e.setState({showCode:"query"===r?null:"query"})},icon:"thunderbolt",size:"small",type:"query"===r?"primary":"default",disabled:!!D.docsLink},"JSON Query"),u.a.createElement(ae.a,{onClick:function(){be("Show Code"),e.setState({showCode:"code"===r?null:"code"})},icon:"code",size:"small",type:"code"===r?"primary":"default",disabled:!!D.docsLink},"Code"),u.a.createElement(ae.a,{onClick:function(){be("Show SQL"),e.setState({showCode:"sql"===r?null:"sql"})},icon:"question-circle",size:"small",type:"sql"===r?"primary":"default",disabled:!!D.docsLink},"SQL"),u.a.createElement(ae.a,{icon:"code-sandbox",size:"small",onClick:function(){return be("Open Code Sandbox")},htmlType:"submit",disabled:!!D.docsLink},"Edit"))),O=JSON.stringify(g,null,2),w=function(){var e=Object(y.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return navigator.clipboard||oe.a.error({message:"Your browser doesn't support copy to clipboard"}),e.prev=1,e.next=4,navigator.clipboard.writeText("query"===r?O:l);case 4:oe.a.success({message:"Copied to clipboard"}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),oe.a.error({message:"Can't copy to clipboard",description:e.t0});case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(){return e.apply(this,arguments)}}();return x="code"===r?u.a.createElement(ae.a,{icon:"copy",onClick:function(){w(),be("Copy Code to Clipboard")},type:"primary"},"Copy Code to Clipboard"):"query"===r?u.a.createElement(ae.a,{icon:"copy",onClick:function(){w(),be("Copy Query to Clipboard")},type:"primary"},"Copy Query to Clipboard"):"sql"===r?"SQL":"Chart",b?d({resultSet:o,error:c,sandboxId:a}):u.a.createElement(ue.a,{title:x,style:{minHeight:420},extra:M},D&&D.docsLink?u.a.createElement("h2",{style:{padding:24,textAlign:"center"}},"We do not support",D.title,"code generation here yet.",u.a.createElement("br",null),"Please refer to",u.a.createElement("a",{href:D.docsLink,target:"_blank",rel:"noopener noreferrer",onClick:function(){return be("Unsupported Framework Docs",{framework:i})}},D.title,"docs"),"to see on how to use it with Cube.js."):"code"===r?u.a.createElement(ye,{code:l}):"query"===r?u.a.createElement(ye,{code:O}):"sql"===r?u.a.createElement(ee.QueryRenderer,{loadSql:"only",query:g,cubejsApi:S,render:function(e){var t=e.sqlQuery;return u.a.createElement(ye,{code:t&&de.a.format(t.sql())})}}):d({resultSet:o,error:c,sandboxId:a}))}}]),t}(u.a.Component);Se.defaultProps={query:{},cubejsApi:null,hideActions:null,dashboardSource:null,codeSandboxSource:null,codeExample:null,error:null,resultSet:null};var je=Se,ve=n(676),Ee={line:'\n  <Chart scale={{ x: { tickCount: 8 } }} height={400} data={stackedChartData(resultSet)} forceFit>\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip crosshairs={{type : \'y\'}} />\n    <Geom type="line" position={`x*measure`} size={2} color="color" />\n  </Chart>',bar:'\n  <Chart scale={{ x: { tickCount: 8 } }} height={400} data={stackedChartData(resultSet)} forceFit>\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip />\n    <Geom type="intervalStack" position={`x*measure`} color="color" />\n  </Chart>',area:'\n  <Chart scale={{ x: { tickCount: 8 } }} height={400} data={stackedChartData(resultSet)} forceFit>\n    <Axis name="x" />\n    <Axis name="measure" />\n    <Tooltip crosshairs={{type : \'y\'}} />\n    <Geom type="areaStack" position={`x*measure`} size={2} color="color" />\n  </Chart>',pie:"\n  <Chart height={400} data={resultSet.chartPivot()} forceFit>\n    <Coord type='theta' radius={0.75} />\n    {resultSet.seriesNames().map(s => (<Axis name={s.key} />))}\n    <Legend position='right' />\n    <Tooltip />\n    {resultSet.seriesNames().map(s => (<Geom type=\"intervalStack\" position={s.key} color=\"category\" />))}\n  </Chart>"},xe=function(e){var t=e.chartType,n=e.renderFnName;return"import { Chart, Axis, Tooltip, Geom, Coord, Legend } from 'bizcharts';\n\nconst stackedChartData = (resultSet) => {\n  const data = resultSet.pivot().map(\n    ({ xValues, yValuesArray }) =>\n      yValuesArray.map(([yValues, m]) => ({\n        x: resultSet.axisValuesString(xValues, ', '),\n        color: resultSet.axisValuesString(yValues, ', '),\n        measure: m && Number.parseFloat(m)\n      }))\n  ).reduce((a, b) => a.concat(b), []);\n\n  return data;\n}\n\nconst ".concat(n," = ({ resultSet }) => (").concat(Ee[t],"\n);")},ke={bizcharts:ve},_e=n(706),Ce={line:'\n  <CartesianChart resultSet={resultSet} ChartComponent={LineChart}>\n      {resultSet.seriesNames().map((series, i) => (\n        <Line\n          key={series.key}\n          stackId="a"\n          dataKey={series.key}\n          name={series.title}\n          stroke={colors[i]}\n        />\n      ))}\n  </CartesianChart>',bar:'\n  <CartesianChart resultSet={resultSet} ChartComponent={BarChart}>\n    {resultSet.seriesNames().map((series, i) => (\n      <Bar\n        key={series.key}\n        stackId="a"\n        dataKey={series.key}\n        name={series.title}\n        fill={colors[i]}\n      />\n    ))}\n  </CartesianChart>',area:'\n  <CartesianChart resultSet={resultSet} ChartComponent={AreaChart}>\n      {resultSet.seriesNames().map((series, i) => (\n        <Area\n          key={series.key}  \n          stackId="a"\n          dataKey={series.key}\n          name={series.title}\n          stroke={colors[i]}\n          fill={colors[i]}\n        />\n      ))}\n  </CartesianChart>',pie:'\n  <ResponsiveContainer width="100%" height={350}>\n    <PieChart>\n      <Pie\n        isAnimationActive={false}\n        data={resultSet.chartPivot()}\n        nameKey="x"\n        dataKey={resultSet.seriesNames()[0].key}\n        fill="#8884d8"\n      >\n      {\n        resultSet.chartPivot().map((e, index) =>\n          <Cell key={index} fill={colors[index % colors.length]}/>\n        )\n      }\n      </Pie>\n      <Legend />\n      <Tooltip />\n    </PieChart>\n  </ResponsiveContainer>'},Te=function(e){var t=e.chartType,n=e.renderFnName;return"import {\n  CartesianGrid,\n  PieChart,\n  Pie,\n  Cell,\n  AreaChart,\n  Area,\n  XAxis,\n  YAxis,\n  Tooltip,\n  ResponsiveContainer,\n  Legend,\n  BarChart,\n  Bar,\n  LineChart,\n  Line\n} from \"recharts\";\n\nconst CartesianChart = ({ resultSet, children, ChartComponent }) => (\n  <ResponsiveContainer width=\"100%\" height={350}>\n    <ChartComponent data={resultSet.chartPivot()}>\n      <XAxis dataKey=\"x\" />\n      <YAxis />\n      <CartesianGrid />\n      { children }\n      <Legend />\n      <Tooltip />\n    </ChartComponent>\n  </ResponsiveContainer>\n)\n\nconst colors = ['#FF6492', '#141446', '#7A77FF'];\n\nconst ".concat(n," = ({ resultSet }) => (").concat(Ce[t],"\n);")},De={recharts:_e},Me=n(687),Oe={line:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map((s, index) => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        borderColor: COLORS_SERIES[index],\n        fill: false\n      }\n    )),\n  };\n  const options = {};\n  return <Line data={data} options={options} />;",bar:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map((s, index) => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        backgroundColor: COLORS_SERIES[index],\n        fill: false\n      }\n    )),\n  };\n  const options = {\n    scales: { xAxes: [{ stacked: true }] }\n  };\n  return <Bar data={data} options={options} />;",area:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map((s, index) => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        backgroundColor: COLORS_SERIES[index]\n      }\n    )),\n  };\n  const options = {\n    scales: { yAxes: [{ stacked: true }] }\n  };\n  return <Line data={data} options={options} />;",pie:"\n  const data = {\n    labels: resultSet.categories().map(c => c.category),\n    datasets: resultSet.series().map(s => (\n      {\n        label: s.title,\n        data: s.series.map(r => r.value),\n        backgroundColor: COLORS_SERIES,\n        hoverBackgroundColor: COLORS_SERIES,\n      }\n    ))\n  };\n  const options = {};\n  return <Pie data={data} options={options} />;"},we=function(e){var t=e.chartType,n=e.renderFnName;return"import { Line, Bar, Pie } from 'react-chartjs-2';\n\nconst COLORS_SERIES = ['#FF6492', '#141446', '#7A77FF'];\n\nconst ".concat(n," = ({ resultSet }) => {").concat(Oe[t],"\n};")},Ie={"react-chartjs-2":Me},Ae={number:'\n  <Row type="flex" justify="center" align="middle" style={{ height: \'100%\' }}>\n    <Col>\n      {resultSet\n        .seriesNames()\n        .map(s => (\n          <Statistic value={resultSet.totalRow()[s.key]} />\n        ))}\n    </Col>\n  </Row>\n  ',table:"\n  <Table \n    pagination={false}\n    columns={resultSet.tableColumns().map(c => ({ ...c, dataIndex: c.key }))} \n    dataSource={resultSet.tablePivot()} \n  />\n  "},Pe=function(e){var t=e.chartType,n=e.renderFnName;return"import { Row, Col, Statistic, Table } from 'antd';\n\nconst ".concat(n," = ({ resultSet }) => (").concat(Ae[t],"\n);")},Re={},Be={bizcharts:{library:r,title:"Bizcharts"},recharts:{library:a,title:"Recharts"},chartjs:{library:i,title:"Chart.js"}},qe={presets:[$.a,Z.a]},Le=function(e){var t=e.chartLibrary,n=e.query,r=e.apiUrl,a=e.cubejsToken,i=e.chartType,s="".concat(i,"Render");return"import React from 'react';\nimport cubejs from '@cubejs-client/core';\nimport { QueryRenderer } from '@cubejs-client/react';\nimport { Spin } from 'antd';\n".concat(t.sourceCodeTemplate(Object(T.a)({},e,{renderFnName:s})),'\n\nconst API_URL = "').concat(r,'"; // change to your actual endpoint\n\nconst cubejsApi = cubejs(\n  "').concat(a,'",\n  { apiUrl: API_URL + "/cubejs-api/v1" }\n);\n\nconst renderChart = (Component) => ({ resultSet, error }) => (\n  (resultSet && <Component resultSet={resultSet} />) ||\n  (error && error.toString()) || \n  (<Spin />)\n)\n\nconst ChartRenderer = () => <QueryRenderer\n  query={').concat(("object"==typeof n?JSON.stringify(n,null,2):n).split("\n").map((function(e,t){return t>0?"  ".concat(e):e})).join("\n"),"}\n  cubejsApi={cubejsApi}\n  render={renderChart(").concat(s,")}\n/>;\n\nexport default ChartRenderer;\n")},Ge=function(e){return"import ReactDOM from 'react-dom';\nimport \"antd/dist/antd.css\";\n".concat(e,'\n\nconst rootElement = document.getElementById("root");\nReactDOM.render(<ChartRenderer />, rootElement);\n')},Ne=function(e,t){return-1!==["table","number"].indexOf(e)?s:Be[t].library},Fe=Object.keys(Be).map((function(e){return{value:e,title:Be[e].title}})),Qe=function(e){var t=e.query,n=e.resultSet,r=e.error,a=e.sqlQuery,i=e.dashboardSource,s=e.cubejsApi,c=e.chartType,l=e.sourceCodeFn,p=Object(o.useState)("bizcharts"),d=Object(K.a)(p,2),m=d[0],h=d[1];l=l||Le;var y=Ne(c,m),f=l(Object(T.a)({},e,{chartLibrary:y})),b=Object(T.a)({"@cubejs-client/core":_.a,"@cubejs-client/react":ee,antd:te,react:u.a},y.imports);return u.a.createElement(J.a,{babelConfig:qe,onError:function(e){return console.log(e)},resolver:function(e){return b[e]},source:f},u.a.createElement(J.a.Consumer,null,(function(e){var o=e.element,c=e.error;return u.a.createElement(je,{query:t,resultSet:n,error:r,sqlQuery:a,codeExample:f,codeSandboxSource:Ge(f),dependencies:b,dashboardSource:i,chartLibrary:m,setChartLibrary:h,chartLibraries:Fe,cubejsApi:s,render:function(){return c?u.a.createElement(ne.a,{message:"Error occurred while compiling JS",description:u.a.createElement("pre",null,c.toString()),type:"error"}):o}})})))};Qe.defaultProps={resultSet:null,error:null,sqlQuery:null,dashboardSource:null,cubejsApi:null,chartType:null,sourceCodeFn:null};var He=function(e){function t(e,n){var r;return Object(f.a)(this,t),(r=Object(g.a)(this,Object(S.a)(t).call(this,e))).chartType=n,r}return Object(j.a)(t,e),Object(b.a)(t,[{key:"findDefinitions",value:function(){return Object(I.a)(Object(S.a)(t.prototype),"findDefinitions",this).call(this).filter((function(e){return"render"!==e.get("declarations")[0].get("id").get("name").node}))}},{key:"mergeTo",value:function(e){Object(I.a)(Object(S.a)(t.prototype),"mergeTo",this).call(this,e);var n=Object(I.a)(Object(S.a)(t.prototype),"findDefinitions",this).call(this).find((function(e){return"render"===e.get("declarations")[0].get("id").get("name").node}));e.definitions.find((function(e){return"TypeToChartComponent"===e.get("id").get("name").node})).get("init").pushContainer("properties",P.objectProperty(P.identifier(this.chartType),n.get("declarations")[0].get("init").node))}},{key:"insertAnchor",value:function(e){var t=null;if(M()(e.ast,{VariableDeclaration:function(e){"TypeToChartComponent"===e.get("declarations")[0].get("id").node.name&&(t=e)}}),!t)throw new Error("renderChart class not found. Can't parse dashboard app.  Please delete dashboard-app directory and try to create it again.");return t}}]),t}(R),ze=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(g.a)(this,Object(S.a)(t).call(this,B["react/components/ChartRenderer.js"]))).chartLibrary=e,n}return Object(j.a)(t,e),Object(b.a)(t,[{key:"mergeTo",value:function(e){var n=this;Object(I.a)(Object(S.a)(t.prototype),"mergeTo",this).call(this,e);["line","bar","area","pie","table","number"].forEach((function(t){var r=Ne(t,n.chartLibrary);new He(r.sourceCodeTemplate({chartType:t,renderFnName:"render"}),t).mergeTo(e)}))}}]),t}(R),Ve=function(e,t,n){return w(e,Object(T.a)({},t,{retries:n}))},Ue=function(){function e(){Object(f.a)(this,e)}var t,n,r,a;return Object(b.a)(e,[{key:"load",value:(a=Object(y.a)(h.a.mark((function e(t,n){var r,a,i;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.chartLibrary,this.loadError=null,!t){e.next=5;break}return e.next=5,Ve("/playground/ensure-dashboard-app",void 0,5);case 5:return e.next=7,Ve("/playground/dashboard-app-files",void 0,5);case 7:return a=e.sent,e.next=10,a.json();case 10:return i=e.sent,e.next=13,this.loadContext();case 13:if(this.playgroundContext=e.sent,this.fileToTargetSource={},i.error?this.loadError=i.error:(this.sourceFiles=i.fileContents,this.filesToPersist=[],this.parse(i.fileContents)),i.error||!this.ensureDashboardIsInApp({chartLibrary:r})){e.next=19;break}return e.next=19,this.persist();case 19:case"end":return e.stop()}}),e,this)}))),function(e,t){return a.apply(this,arguments)})},{key:"loadContext",value:(r=Object(y.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/playground/context");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",{cubejsToken:n.cubejsToken,apiUrl:n.apiUrl||window.location.href.split("#")[0].replace(/\/$/,"")});case 7:case"end":return e.stop()}}),e)}))),function(){return r.apply(this,arguments)})},{key:"persistFiles",value:(n=Object(y.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ve("/playground/dashboard-app-files",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({files:t})},5));case 1:case"end":return e.stop()}}),e)}))),function(e){return n.apply(this,arguments)})},{key:"persist",value:(t=Object(y.a)(h.a.mark((function e(){var t,n,r,a,i=this;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.appLayoutAdded?[Object(T.a)({},this.indexCssFile,{content:this.indexCssFile.content+"\nbody {\n  background-color: #f0f2f5 !important;\n}\n"})]:[],n=this.filesToPersist.concat(Object.keys(this.fileToTargetSource).map((function(e){return{fileName:e,content:i.fileToTargetSource[e].formattedCode()}}))).concat(t),e.next=4,this.persistFiles(n);case 4:return this.appLayoutAdded=!1,r=n.filter((function(e){return e.fileName.match(/\.js$/)})).map((function(e){return new H(e.fileName,e.content).imports})).reduce((function(e,t){return e.concat(t)})),a=r.filter((function(e){return 0!==e.get("source").node.value.indexOf(".")})).map((function(e){var t=e.get("source").node.value.split("/"),n=0===t[0].indexOf("@")?[t[0],t[1]].join("/"):t[0];return i.withPeerDependencies(n)})).reduce((function(e,t){return Object(T.a)({},e,t)})),e.next=9,Ve("/playground/ensure-dependencies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({dependencies:a})},5);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"withPeerDependencies",value:function(e){var t=Object(C.a)({},e,"latest");return"graphql-tag"===e&&(t=Object(T.a)({},t,{graphql:"latest"})),"react-chartjs-2"===e&&(t=Object(T.a)({},t,{"chart.js":"latest"})),t}},{key:"parse",value:function(e){if(this.appFile=e.find((function(e){return-1!==e.fileName.indexOf("src/App.js")})),!this.appFile)throw new Error("src/App.js file not found. Can't parse dashboard app. Please delete dashboard-app directory and try to create it again.");this.indexCssFile=e.find((function(e){return-1!==e.fileName.indexOf("src/index.css")})),this.appTargetSource=this.targetSourceByFile("/src/App.js")}},{key:"ensureDashboardIsInApp",value:function(e){var t=this,n=e.chartLibrary,r=!1,a=null;M()(this.appTargetSource.ast,{JSXOpeningElement:function(e){"Dashboard"===e.get("name").get("name").node&&(r=!0),"header"===e.get("name").get("name").node&&e.get("attributes").find((function(e){return"className"===e.get("name").get("name").node&&e.get("value").node&&"StringLiteral"===e.get("value").node.type&&"App-header"===e.get("value").node.value}))&&(a=e)}});var i=!1;if(!r&&a){this.appLayoutAdded=!0;var s={"react/App.js":new q,"react/index.js":new V(this.playgroundContext),"react/pages/ExplorePage.js":new U,"react/components/ChartRenderer.js":new ze(n)};Object.keys(B).filter((function(e){return 0===e.indexOf("react/")})).forEach((function(e){t.mergeSnippetToFile(s[e]||new R(B[e]),z.targetSourceName(e))})),i=!0}return i}},{key:"targetSourceByFile",value:function(e){var t=this.sourceFiles.find((function(t){return t.fileName===e}));return t||(t={fileName:e,content:B[z.scaffoldingSourceName(e)]}),this.fileToTargetSource[e]||(this.fileToTargetSource[e]=new H(t.fileName,t.content)),this.fileToTargetSource[e]}},{key:"mergeSnippetToFile",value:function(e,t){var n=this.targetSourceByFile(t);e.mergeTo(n)}},{key:"dashboardAppCode",value:function(){return this.appTargetSource.code()}}]),e}(),Ke=n(144),Ye=n(86),Je=n(631),We=function(e){var t=e.overlay,n=Object(O.a)(e,["overlay"]);return u.a.createElement(ie.a,{overlay:t,placement:"bottomLeft",trigger:["click"]},u.a.createElement(ae.a,n))},$e=function(e,t){return u.a.createElement(re.a,null,t.length?t.map((function(t){return u.a.createElement(re.a.Item,{key:t.name,onClick:function(){return e(t)}},t.title)})):u.a.createElement(re.a.Item,{disabled:!0},"No members found"))},Xe=function(e){var t=e.onClick,n=e.availableMembers,r=Object(O.a)(e,["onClick","availableMembers"]);return u.a.createElement(We,Object.assign({overlay:$e(t,n)},r))},Ze=function(e){var t=e.onRemoveClick,n=e.children,r=Object(O.a)(e,["onRemoveClick","children"]);return u.a.createElement(ae.a.Group,Object.assign({style:{marginRight:8}},r),n,u.a.createElement(ae.a,{type:"danger",ghost:!0,onClick:t},u.a.createElement(se.a,{type:"close"})))},et=function(e){var t=e.members,n=e.availableMembers,r=e.addMemberName,a=e.updateMethods;return u.a.createElement("span",null,t.map((function(e){return u.a.createElement(Ze,{key:e.index||e.name,onRemoveClick:function(){return a.remove(e)}},u.a.createElement(Xe,{availableMembers:n,onClick:function(t){return a.update(e,t)}},e.title))})),u.a.createElement(Xe,{onClick:function(e){return a.add(e)},availableMembers:n,type:"dashed",icon:"plus"},r))},tt=n(77),nt=n(0),rt=n(139),at={string:function(e){var t=e.values,n=e.onChange;return u.a.createElement(tt.a,{key:"input",style:{width:300},mode:"tags",onChange:n,value:t})},number:function(e){var t=e.values,n=e.onChange;return u.a.createElement(rt.a,{key:"input",style:{width:300},onChange:function(e){return n([e.target.value])},value:t&&t[0]||""})}};at.string.propTypes={values:nt.array,onChange:nt.func.isRequired},at.string.defaultProps={values:[]},at.number.propTypes={values:nt.array,onChange:nt.func.isRequired},at.number.defaultProps={values:[]};var it=function(e){var t=e.member,n=e.updateMethods,r=at[t.dimension.type]||at.string;return u.a.createElement(r,{key:"filter",values:t.values,onChange:function(e){return n.update(t,Object(T.a)({},t,{values:e}))}})},st=function(e){var t=e.members,n=e.availableMembers,r=e.addMemberName,a=e.updateMethods;return u.a.createElement("span",null,t.map((function(e){return u.a.createElement("div",{style:{marginBottom:12},key:e.index},u.a.createElement(Ze,{onRemoveClick:function(){return a.remove(e)}},u.a.createElement(Xe,{onClick:function(t){return a.update(e,Object(T.a)({},e,{dimension:t}))},availableMembers:n,style:{width:150,textOverflow:"ellipsis",overflow:"hidden"}},e.dimension.title)),u.a.createElement(tt.a,{value:e.operator,onChange:function(t){return a.update(e,Object(T.a)({},e,{operator:t}))},style:{width:200,marginRight:8}},e.operators.map((function(e){return u.a.createElement(tt.a.Option,{key:e.name,value:e.name},e.title)}))),u.a.createElement(it,{member:e,key:"filterInput",updateMethods:a}))})),u.a.createElement(Xe,{onClick:function(e){return a.add({dimension:e})},availableMembers:n,type:"dashed",icon:"plus"},r))},ot=[{title:"All time",value:void 0},{value:"Today"},{value:"Yesterday"},{value:"This week"},{value:"This month"},{value:"This quarter"},{value:"This year"},{value:"Last 7 days"},{value:"Last 30 days"},{value:"Last week"},{value:"Last month"},{value:"Last quarter"},{value:"Last year"}],ut=function(e){var t=e.members,n=e.availableMembers,r=e.addMemberName,a=e.updateMethods;return u.a.createElement("span",null,t.map((function(e){return[u.a.createElement(Ze,{onRemoveClick:function(){return a.remove(e)},key:"".concat(e.dimension.name,"-member")},u.a.createElement(Xe,{onClick:function(t){return a.update(e,Object(T.a)({},e,{dimension:t}))},availableMembers:n},e.dimension.title)),u.a.createElement("b",{key:"".concat(e.dimension.name,"-for")},"FOR"),u.a.createElement(We,{overlay:(i=function(t){return a.update(e,Object(T.a)({},e,{dateRange:t.value}))},u.a.createElement(re.a,null,ot.map((function(e){return u.a.createElement(re.a.Item,{key:e.title||e.value,onClick:function(){return i(e)}},e.title||e.value)})))),style:{marginLeft:8,marginRight:8},key:"".concat(e.dimension.name,"-date-range")},e.dateRange||"All time"),u.a.createElement("b",{key:"".concat(e.dimension.name,"-by")},"BY"),u.a.createElement(We,{overlay:(t=e.dimension,r=function(t){return a.update(e,Object(T.a)({},e,{granularity:t.name}))},u.a.createElement(re.a,null,t.granularities.length?t.granularities.map((function(e){return u.a.createElement(re.a.Item,{key:e.title,onClick:function(){return r(e)}},e.title)})):u.a.createElement(re.a.Item,{disabled:!0},"No members found"))),style:{marginLeft:8},key:"".concat(e.dimension.name,"-granularity")},e.dimension.granularities.find((function(t){return t.name===e.granularity}))&&e.dimension.granularities.find((function(t){return t.name===e.granularity})).title)];var t,r,i})),!t.length&&u.a.createElement(Xe,{onClick:function(e){return a.add({dimension:e,granularity:"day"})},availableMembers:n,type:"dashed",icon:"plus"},r))},ct=[{name:"line",title:"Line",icon:"line-chart"},{name:"area",title:"Area",icon:"area-chart"},{name:"bar",title:"Bar",icon:"bar-chart"},{name:"pie",title:"Pie",icon:"pie-chart"},{name:"table",title:"Table",icon:"table"},{name:"number",title:"Number",icon:"info-circle"}],lt=function(e){var t=e.chartType,n=e.updateChartType,r=u.a.createElement(re.a,null,ct.map((function(e){return u.a.createElement(re.a.Item,{key:e.title,onClick:function(){return n(e.name)}},u.a.createElement(se.a,{type:e.icon}),e.title)}))),a=ct.find((function(e){return e.name===t}));return u.a.createElement(We,{overlay:r,icon:a.icon},a.title)},pt=function(e,t){return Object.keys(e).map((function(n){return Object(C.a)({},n,(function(r,a){var i="".concat(n.split("").map((function(e,t){return 0===t?e.toUpperCase():e})).join("")," Member");a&&a.values&&(i="Update Filter Values"),a&&a.dateRange&&(i="Update Date Range"),a&&a.granularity&&(i="Update Granularity"),be(i,{memberName:t});for(var s=arguments.length,o=new Array(s>2?s-2:0),u=2;u<s;u++)o[u-2]=arguments[u];return e[n].apply(null,[r,a].concat(o))}))})).reduce((function(e,t){return Object(T.a)({},e,t)}),{})},dt=function(e){var t=e.query,n=e.cubejsApi,r=e.apiUrl,a=e.cubejsToken,i=e.dashboardSource,s=e.setQuery;return u.a.createElement(ee.QueryBuilder,{query:t,setQuery:s,cubejsApi:n,render:function(e){var t=e.resultSet,s=e.error,o=e.validatedQuery,c=e.isQueryPresent,l=e.chartType,p=e.updateChartType,d=e.measures,m=e.availableMeasures,h=e.updateMeasures,y=e.dimensions,f=e.availableDimensions,b=e.updateDimensions,g=e.segments,S=e.availableSegments,j=e.updateSegments,v=e.filters,E=e.updateFilters,x=e.timeDimensions,k=e.availableTimeDimensions,_=e.updateTimeDimensions;return[u.a.createElement(Ke.a,{type:"flex",justify:"space-around",align:"top",gutter:24,style:{marginBottom:12},key:"1"},u.a.createElement(Ye.a,{span:24},u.a.createElement(ue.a,null,u.a.createElement(Ke.a,{type:"flex",justify:"space-around",align:"top",gutter:24,style:{marginBottom:12}},u.a.createElement(Ye.a,{span:24},u.a.createElement(et,{members:d,availableMembers:m,addMemberName:"Measure",updateMethods:pt(h,"Measure")}),u.a.createElement(Je.a,{type:"vertical"}),u.a.createElement(et,{members:y,availableMembers:f,addMemberName:"Dimension",updateMethods:pt(b,"Dimension")}),u.a.createElement(Je.a,{type:"vertical"}),u.a.createElement(et,{members:g,availableMembers:S,addMemberName:"Segment",updateMethods:pt(j,"Segment")}),u.a.createElement(Je.a,{type:"vertical"}),u.a.createElement(ut,{members:x,availableMembers:k,addMemberName:"Time",updateMethods:pt(_,"Time")}))),u.a.createElement(Ke.a,{type:"flex",justify:"space-around",align:"top",gutter:24,style:{marginBottom:12}},u.a.createElement(Ye.a,{span:24},u.a.createElement(st,{members:v,availableMembers:f.concat(m),addMemberName:"Filter",updateMethods:pt(E,"Filter")}))),u.a.createElement(Ke.a,{type:"flex",justify:"space-around",align:"top",gutter:24},u.a.createElement(Ye.a,{span:24},u.a.createElement(lt,{chartType:l,updateChartType:function(e){be("Change Chart Type"),p(e)}})))))),u.a.createElement(Ke.a,{type:"flex",justify:"space-around",align:"top",gutter:24,key:"2"},u.a.createElement(Ye.a,{span:24},c?u.a.createElement(Qe,{query:o,resultSet:t,error:s,apiUrl:r,cubejsToken:a,chartType:l,cubejsApi:n,dashboardSource:i}):u.a.createElement("h2",{style:{textAlign:"center"}},"Choose a measure or dimension to get started")))]}})};dt.defaultProps={query:{},setQuery:null,cubejsApi:null,dashboardSource:null,apiUrl:"/cubejs-api/v1",cubejsToken:null};var mt=dt,ht=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(g.a)(this,Object(S.a)(t).call(this,e))).state={},n.dashboardSource=new Ue,n}var n;return Object(j.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:(n=Object(y.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(v.a)("/playground/context");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({cubejsToken:n.cubejsToken,apiUrl:n.apiUrl||window.location.href.split("#")[0].replace(/\/$/,"")});case 7:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"cubejsApi",value:function(){var e=this.state,t=e.cubejsToken,n=e.apiUrl;return!this.cubejsApiInstance&&t&&(this.cubejsApiInstance=_()(t,{apiUrl:"".concat(n,"/cubejs-api/v1")})),this.cubejsApiInstance}},{key:"render",value:function(){var e=this.state,t=e.cubejsToken,n=e.apiUrl,r=this.props,a=r.location,i=r.history,s=new URLSearchParams(a.search),o=s.get("query")&&JSON.parse(s.get("query"))||{};return this.cubejsApi()&&u.a.createElement(mt,{query:o,setQuery:function(e){return i.push("/build?query=".concat(JSON.stringify(e)))},cubejsApi:this.cubejsApi(),apiUrl:n,cubejsToken:t,dashboardSource:this.dashboardSource})||null}}]),t}(o.Component);ht.defaultProps={};var yt=ht,ft=n(634),bt=n(667),gt=n(249),St=n(668),jt=n(146),vt=ft.a.Content,Et=ft.a.Sider,xt=bt.a.TreeNode,kt=gt.a.TabPane,_t=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(g.a)(this,Object(S.a)(t).call(this,e))).state={expandedKeys:[],autoExpandParent:!0,checkedKeys:[],selectedKeys:[],activeTab:"schema",files:[]},n}var n,r,a,i;return Object(j.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:(i=Object(y.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.loadDBSchema();case 2:return e.next=4,this.loadFiles();case 4:case"end":return e.stop()}}),e,this)}))),function(){return i.apply(this,arguments)})},{key:"onExpand",value:function(e){be("Expand Tables"),this.setState({expandedKeys:e,autoExpandParent:!1})}},{key:"onCheck",value:function(e){be("Check Tables"),this.setState({checkedKeys:e})}},{key:"onSelect",value:function(e){this.setState({selectedKeys:e})}},{key:"cubejsApi",value:function(){var e=this.state,t=e.cubejsToken,n=e.apiUrl;return!this.cubejsApiInstance&&t&&(this.cubejsApiInstance=_()(t,{apiUrl:"".concat(n,"/cubejs-api/v1")})),this.cubejsApiInstance}},{key:"loadDBSchema",value:(a=Object(y.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({schemaLoading:!0}),e.prev=1,e.next=4,w("/playground/db-schema");case 4:return t=e.sent,e.next=7,t.json();case 7:n=e.sent,this.setState({tablesSchema:n.tablesSchema}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.setState({schemaLoadingError:e.t0});case 14:return e.prev=14,this.setState({schemaLoading:!1}),e.finish(14);case 17:case"end":return e.stop()}}),e,this,[[1,11,14,17]])}))),function(){return a.apply(this,arguments)})},{key:"loadFiles",value:(r=Object(y.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("/playground/files");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,this.setState({files:n.files});case 7:case"end":return e.stop()}}),e,this)}))),function(){return r.apply(this,arguments)})},{key:"generateSchema",value:(n=Object(y.a)(h.a.mark((function e(){var t,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state.checkedKeys,n=this.props.history,be("Generate Schema"),e.next=5,w("/playground/generate-schema",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tables:t.filter((function(e){return 2===e.split(".").length}))})});case 5:if(200!==(r=e.sent).status){e.next=14;break}return be("Generate Schema Success"),e.next=10,this.loadFiles();case 10:this.setState({checkedKeys:[],activeTab:"files"}),St.a.success({title:"Schema files successfully generated!",content:"You can start building the charts",okText:"Build",cancelText:"Close",okCancel:!0,onOk:function(){n.push("/build")}}),e.next=20;break;case 14:return e.t0=be,e.next=17,r.text();case 17:e.t1=e.sent,e.t2={error:e.t1},(0,e.t0)("Generate Schema Fail",e.t2);case 20:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"selectedFileContent",value:function(){var e=this.selectedFile();return e&&e.content}},{key:"selectedFile",value:function(){var e=this.state,t=e.files,n=e.selectedFile;return t.find((function(e){return e.fileName===n}))}},{key:"renderFilesMenu",value:function(){var e=this,t=this.state,n=t.selectedFile,r=t.files;return u.a.createElement(re.a,{mode:"inline",onClick:function(t){var n=t.key;be("Select File"),e.setState({selectedFile:n})},selectedKeys:n?[n]:[]},r.map((function(e){return u.a.createElement(re.a.Item,{key:e.fileName},e.fileName)})))}},{key:"render",value:function(){var e=this,t=this.state,n=t.schemaLoading,r=t.schemaLoadingError,a=t.tablesSchema,i=t.selectedFile,s=t.expandedKeys,o=t.autoExpandParent,c=t.checkedKeys,l=t.selectedKeys,p=t.activeTab,d=u.a.createElement(re.a,null,u.a.createElement(re.a.Item,{onClick:function(){return e.generateSchema()}},"Generate Schema")),m=function(){return Object.keys(a||{}).length>0?u.a.createElement(bt.a,{checkable:!0,onExpand:e.onExpand.bind(e),expandedKeys:s,autoExpandParent:o,onCheck:e.onCheck.bind(e),checkedKeys:c,onSelect:e.onSelect.bind(e),selectedKeys:l},function e(t){return t.map((function(t){return t.children?u.a.createElement(xt,{title:t.title,key:t.key,dataRef:t},e(t.children)):u.a.createElement(xt,t)}))}((t=a||{},Object.keys(t).map((function(e){return{title:e,key:e,children:Object.keys(t[e]).map((function(t){return{title:t,key:"".concat(e,".").concat(t)}}))}}))))):u.a.createElement(ne.a,{message:"Empty DB Schema",description:"Please check connection settings",type:"warning"});var t};return u.a.createElement(ft.a,{style:{height:"100%"}},u.a.createElement(Et,{width:300,style:{background:"#fff",borderRight:"1px solid #eee"},className:"schema-sidebar"},u.a.createElement(gt.a,{activeKey:p,onChange:function(t){return e.setState({activeTab:t})},tabBarExtraContent:u.a.createElement(ie.a,{overlay:d,placement:"bottomRight",disabled:!c.length},u.a.createElement(ae.a,{shape:"circle",icon:"plus",type:"primary",style:{marginRight:8}}))},u.a.createElement(kt,{tab:"Tables",key:"schema"},n?u.a.createElement(E.a,{style:{width:"100%"}}):r?u.a.createElement(ne.a,{message:"Error while loading DB schema",description:r.toString(),type:"error"}):m()),u.a.createElement(kt,{tab:"Files",key:"files"},this.renderFilesMenu()))),u.a.createElement(vt,{style:{minHeight:280}},i&&u.a.createElement(ne.a,{message:u.a.createElement("span",null,"This file can be edited at",u.a.createElement("b",null,this.selectedFile().absPath)),type:"info",style:{paddingTop:10,paddingBottom:11}}),i?u.a.createElement(ye,{code:this.selectedFileContent(),style:{padding:12}}):u.a.createElement(jt.a,{style:{marginTop:50},description:"Select tables to generate Cube.js schema"})))}}]),t}(o.Component),Ct=n(666),Tt=function(e){var t=e.children;return u.a.createElement("div",{style:{textAlign:"center",marginTop:50}},t)},Dt=function(){return u.a.createElement("p",{style:{width:450,margin:"20px auto"}},"Dashboard App is a convenient way to setup and deploy frontend app to work with Cube.js backend. You can learn more about it the ",u.a.createElement("a",{href:"https://cube.dev/docs/dashboard-app",target:"_blankl"},"Cube.js docs"),".")},Mt=function(e){function t(e){var n;return Object(f.a)(this,t),(n=Object(g.a)(this,Object(S.a)(t).call(this,e))).state={chartLibrary:Fe[0].value,framework:"react"},n}var n,r,a;return Object(j.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:(a=Object(y.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.dashboardSource=new Ue,e.next=3,this.loadDashboard();case 3:case"end":return e.stop()}}),e,this)}))),function(){return a.apply(this,arguments)})},{key:"loadDashboard",value:(r=Object(y.a)(h.a.mark((function e(t){var n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.state.chartLibrary,this.setState({appCode:null,loadError:null}),e.prev=2,e.next=5,this.dashboardSource.load(t,{chartLibrary:n});case 5:return this.setState({dashboardStarting:!1,appCode:!this.dashboardSource.loadError&&this.dashboardSource.dashboardAppCode(),loadError:this.dashboardSource.loadError}),e.next=8,w("/playground/dashboard-app-status");case 8:return e.next=10,e.sent.json();case 10:if(r=e.sent,this.setState({dashboardRunning:r.running,dashboardPort:r.dashboardPort,dashboardAppPath:r.dashboardAppPath}),!t){e.next=15;break}return e.next=15,this.startDashboardApp();case 15:e.next=21;break;case 17:throw e.prev=17,e.t0=e.catch(2),this.setState({dashboardStarting:!1,loadError:u.a.createElement("pre",null,e.t0.toString())}),e.t0;case 21:case"end":return e.stop()}}),e,this,[[2,17]])}))),function(e){return r.apply(this,arguments)})},{key:"startDashboardApp",value:(n=Object(y.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({dashboardStarting:!0}),e.next=3,w("/playground/start-dashboard-app");case 3:return e.next=5,this.loadDashboard();case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"render",value:function(){var e=this,t=this.state,n=t.chartLibrary,r=t.framework,a=Fe.find((function(e){return e.value===n})),i=ge.find((function(e){return e.id===r})),s=u.a.createElement(re.a,{onClick:function(t){be("Set Chart Library",{chartLibrary:t.key}),e.setState({chartLibrary:t.key})}},Fe.map((function(e){return u.a.createElement(re.a.Item,{key:e.value},e.title)}))),o=u.a.createElement(re.a,{onClick:function(t){be("Set Framework",{framework:t.key}),e.setState({framework:t.key})}},ge.map((function(e){return u.a.createElement(re.a.Item,{key:e.id},e.title)}))),c=this.state,l=c.appCode,p=c.dashboardPort,d=c.loadError,m=c.dashboardRunning,h=c.dashboardStarting,y=c.dashboardAppPath;if(d)return u.a.createElement(Tt,null,u.a.createElement("h2",null,d),u.a.createElement(Ct.a,{layout:"inline"},u.a.createElement(Ct.a.Item,null,u.a.createElement(ie.a,{overlay:o},u.a.createElement(ae.a,null,i&&i.title,u.a.createElement(se.a,{type:"down"})))),u.a.createElement(Ct.a.Item,null,u.a.createElement(ie.a,{overlay:s,disabled:!!i.docsLink},u.a.createElement(ae.a,null,a&&a.title,u.a.createElement(se.a,{type:"down"}))))),i&&i.docsLink&&u.a.createElement("h2",{style:{paddingTop:24,textAlign:"center"}},"We do not support",i.title,"dashboard scaffolding generation yet.",u.a.createElement("br",null),"Please refer to",u.a.createElement("a",{href:i.docsLink,target:"_blank",rel:"noopener noreferrer",onClick:function(){return be("Unsupported Dashboard Framework Docs",{framework:r})}},i.title,"docs"),"to see on how to use it with Cube.js."),u.a.createElement("p",{style:{marginTop:25}},u.a.createElement(ae.a,{type:"primary",size:"large",onClick:function(){return e.loadDashboard(!0)},disabled:!!i.docsLink},"Create dashboard app template in your project directory")),u.a.createElement(Dt,null));if(!l)return u.a.createElement(Tt,null,u.a.createElement("h2",null,"Creating Dashboard App"),u.a.createElement("p",null,u.a.createElement(E.a,{tip:"It may take several minutes. Please check console for progress..."})),u.a.createElement(Dt,null));if(!m)return u.a.createElement(Tt,null,u.a.createElement("h2",null,"Dashboard App is not running"),u.a.createElement("h3",null,"Please start dashboard app or run it manually using",u.a.createElement("code",{className:"inline-code"},"$ npm run start"),u.a.createElement("br",null),"in",u.a.createElement("b",null,y),"directory."),u.a.createElement("p",{style:{marginTop:25}},u.a.createElement(ae.a,{type:"primary",size:"large",loading:h,onClick:function(){return e.startDashboardApp(!0)}},h?"Dashboard app is starting. It may take a while. Please check console for progress...":"Start dashboard app")),u.a.createElement(Dt,null));var f="http://".concat(window.location.hostname,":").concat(p);return u.a.createElement("div",{style:{height:"100%",width:"100%",padding:"15px 30px 30px 30px",background:"#fff"}},u.a.createElement(ne.a,{message:u.a.createElement("span",null,"This dashboard app can be edited at",u.a.createElement("b",null,y),". Dev server is running at",u.a.createElement("a",{href:f,target:"_blank",rel:"noopener noreferrer"},f),". Learn more how to customize and deploy it at",u.a.createElement("a",{href:"https://cube.dev/docs/dashboard-app"},"Cube.jsdocs"),".",u.a.createElement("a",{onClick:function(){return window.location.reload()},style:{cursor:"pointer"}},"Refresh page"),"if it is empty."),type:"info",closable:!0,style:{marginBottom:15}}),u.a.createElement("iframe",{src:f,style:{width:"100%",height:"100%",border:0,borderRadius:4,overflow:"hidden"},sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin",title:"Dashboard"}))}}]),t}(o.Component),Ot=n(166),wt=(n(1912),n(1913),ft.a.Header),It=ft.a.Content,At=function(e){function t(){return Object(f.a)(this,t),Object(g.a)(this,Object(S.a)(t).apply(this,arguments))}var n;return Object(j.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:(n=Object(y.a)(h.a.mark((function e(){var t,n;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("unhandledrejection",(function(e){var t=e.reason;console.log(t);var n=(t.stack||t).toString();fe("Playground Error",{error:n}),oe.a.error({message:u.a.createElement("span",null,u.a.createElement("b",null,"Error"),"",u.a.createElement("div",null,"Ask about it in",u.a.createElement("a",{href:"https://slack.cube.dev",target:"_blank",rel:"noopener noreferrer"},"Slack"),". These guys know how to fix this for sure!")),description:n})})),e.next=3,Object(v.a)("/playground/context");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,window.analytics&&window.analytics.identify(n.anonymousId,{coreServerVersion:n.coreServerVersion});case 8:case"end":return e.stop()}}),e)}))),function(){return n.apply(this,arguments)})},{key:"componentDidCatch",value:function(e,t){fe("Playground Error",{error:(e.stack||e).toString(),info:t.toString()})}},{key:"render",value:function(){var e=(this.state||{}).fatalError,t=this.props,n=t.location,r=t.children;return u.a.createElement(ft.a,{style:{height:"100%"}},u.a.createElement(wt,{style:{padding:"0 32px"}},u.a.createElement("div",{style:{float:"left"}},u.a.createElement("img",{src:"./cubejs-playground-logo.svg",style:{display:"inline",height:43,marginRight:15},alt:""})),u.a.createElement(re.a,{theme:"light",mode:"horizontal",selectedKeys:[n.pathname]},u.a.createElement(re.a.Item,{key:"/build"},u.a.createElement(Ot.a,{to:"/build"},"Build")),u.a.createElement(re.a.Item,{key:"/dashboard"},u.a.createElement(Ot.a,{to:"/dashboard"},"Dashboard App")),u.a.createElement(re.a.Item,{key:"/schema"},u.a.createElement(Ot.a,{to:"/schema"},"Schema")),u.a.createElement(re.a.Item,{key:"docs",style:{float:"right"}},u.a.createElement("a",{href:"https://cube.dev/docs",target:"_blank"},u.a.createElement(se.a,{type:"book"}),"Docs")),u.a.createElement(re.a.Item,{key:"slack",style:{float:"right"}},u.a.createElement("a",{href:"https://slack.cube.dev",target:"_blank"},u.a.createElement(se.a,{type:"slack"}),"Slack")))),u.a.createElement(It,{style:{height:"100%"}},e?u.a.createElement(ne.a,{message:"Error occured while rendering",description:e.stack,type:"error"}):r))}}],[{key:"getDerivedStateFromError",value:function(e){return{fatalError:e}}}]),t}(o.Component);At.defaultProps={children:[]};var Pt=Object(p.f)(At),Rt=Object(d.b)();Rt.listen((function(e){var t;t=e,window.analytics&&window.analytics.page(t)})),l.a.render(u.a.createElement(p.c,{history:Rt},u.a.createElement(Pt,null,u.a.createElement(p.b,{key:"index",exact:!0,path:"/",component:x}),u.a.createElement(p.b,{key:"build",path:"/build",component:yt}),u.a.createElement(p.b,{key:"schema",path:"/schema",component:_t}),u.a.createElement(p.b,{key:"dashboard",path:"/dashboard",component:Mt}))),document.getElementById("root"))},205:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var a=r(n(734));n(445);var i=r(n(736));n(737);var s=r(n(742)),o=r(n(743));n(744);var u=r(n(754));n(755),n(760);var c=r(n(762));n(763),n(463),n(767);var l=r(n(769)),p=r(n(462));n(773),n(775),n(776),n(779);var d=r(n(780));n(782),n(783),n(785);var m=n(1915),h=r(n(468)),y=r(n(786));n(787),n(788),n(795);var f=y.extendMoment(h),b={day:function(e){return Array.from(e.by("day")).map((function(e){return e.format("YYYY-MM-DDT00:00:00.000")}))},month:function(e){return Array.from(e.snapTo("month").by("month")).map((function(e){return e.format("YYYY-MM-01T00:00:00.000")}))},year:function(e){return Array.from(e.snapTo("year").by("year")).map((function(e){return e.format("YYYY-01-01T00:00:00.000")}))},hour:function(e){return Array.from(e.by("hour")).map((function(e){return e.format("YYYY-MM-DDTHH:00:00.000")}))},week:function(e){return Array.from(e.snapTo("isoweek").by("week")).map((function(e){return e.startOf("isoweek").format("YYYY-MM-DDT00:00:00.000")}))}},g=function(){function e(t){s(this,e),this.loadResponse=t}return o(e,[{key:"series",value:function(e){var t=this;return this.seriesNames(e).map((function(n){var r=n.title,a=n.key;return{title:r,series:t.chartPivot(e).map((function(e){var t=e.category,n=e.x;return{value:d(e,["category","x"])[a],category:t,x:n}}))}}))}},{key:"axisValues",value:function(e){var t=this.loadResponse.query;return function(n){var r=function(t){return e.filter((function(e){return"measures"!==e})).map((function(e){return null!=n[e]?n[e]:null})).concat(t?[t]:[])};return e.find((function(e){return"measures"===e}))&&(t.measures||[]).length?t.measures.map(r):[r()]}}},{key:"axisValuesString",value:function(e,t){return e.map((function(e){return null==e?"":""===e?"[Empty string]":e})).join(t||", ")}},{key:"normalizePivotConfig",value:function(e){var t=this.loadResponse.query,n=(t.timeDimensions||[]).filter((function(e){return!!e.granularity}));(e=e||(n.length?{x:n.map((function(e){return e.dimension})),y:t.dimensions||[]}:{x:t.dimensions||[],y:[]})).x=e.x||[],e.y=e.y||[];var r=e.x.concat(e.y),a=n.map((function(e){return e.dimension})).concat(t.dimensions);return e.x=e.x.concat(a.filter((function(e){return-1===r.indexOf(e)}))),e.x.concat(e.y).find((function(e){return"measures"===e}))||(e.y=e.y.concat(["measures"])),(t.measures||[]).length||(e.x=e.x.filter((function(e){return"measures"!==e})),e.y=e.y.filter((function(e){return"measures"!==e}))),null==e.fillMissingDates&&(e.fillMissingDates=!0),e}},{key:"timeSeries",value:function(e){if(!e.granularity)return null;var t=e.dateRange;if(!t){var n=m.pipe(m.map((function(t){return t[e.dimension]&&f(t[e.dimension])})),m.filter((function(e){return!!e})))(this.loadResponse.data);t=n.length&&[m.reduce(m.minBy((function(e){return e.toDate()})),n[0],n),m.reduce(m.maxBy((function(e){return e.toDate()})),n[0],n)]||null}if(!t)return null;var r=f(t[0]).format("YYYY-MM-DD 00:00:00"),a=f(t[1]).format("YYYY-MM-DD 23:59:59"),i=f.range(r,a);if(!b[e.granularity])throw new Error("Unsupported time granularity: ".concat(e.granularity));return b[e.granularity](i)}},{key:"pivot",value:function(t){var n=this;t=this.normalizePivotConfig(t);var r=m.groupBy((function(e){var t=e.xValues;return n.axisValuesString(t)})),a=function(e,t,n){return e[t]};if(t.fillMissingDates&&1===t.x.length&&m.equals(t.x,(this.loadResponse.query.timeDimensions||[]).filter((function(e){return!!e.granularity})).map((function(e){return e.dimension})))){var i=this.timeSeries(this.loadResponse.query.timeDimensions[0]);i&&(r=function(e){var t=m.groupBy((function(e){var t=e.xValues;return f(t[0]).format(f.HTML5_FMT.DATETIME_LOCAL_MS)}),e);return i.map((function(e){return p({},e,t[e]||[{xValues:[e],row:{}}])})).reduce((function(e,t){return Object.assign(e,t)}),{})},a=function(e,t,n){return e[t]||0})}var s=m.pipe(m.map((function(e){return n.axisValues(t.x)(e).map((function(t){return{xValues:t,row:e}}))})),m.unnest,r,m.toPairs)(this.loadResponse.data),o=m.pipe(m.map((function(e){var r=l(e,2),a=(r[0],r[1]);return m.unnest(a.filter((function(e){var t=e.row;return Object.keys(t).length>0})).map((function(e){var r=e.row;return n.axisValues(t.y)(r)})))})),m.unnest,m.uniq)(s);return s.map((function(r){var i=l(r,2),s=(i[0],i[1]),u=s[0].xValues,c=m.pipe(m.map((function(e){var r=e.row;return n.axisValues(t.y)(r).map((function(e){return{yValues:e,row:r}}))})),m.unnest,m.groupBy((function(e){var t=e.yValues;return n.axisValuesString(t)})))(s);return{xValues:u,yValuesArray:m.unnest(o.map((function(r){var i=t.x.find((function(e){return"measures"===e}))?e.measureFromAxis(u):e.measureFromAxis(r);return(c[n.axisValuesString(r)]||[{row:{}}]).map((function(e){var t=e.row;return[r,a(t,i,u)]}))})))}}))}},{key:"pivotedRows",value:function(e){return this.chartPivot(e)}},{key:"chartPivot",value:function(e){var t=this;return this.pivot(e).map((function(e){var n=e.xValues,r=e.yValuesArray;return c({category:t.axisValuesString(n,", "),x:t.axisValuesString(n,", ")},r.map((function(e){var n=l(e,2),r=n[0],a=n[1];return p({},t.axisValuesString(r,", "),a&&Number.parseFloat(a))})).reduce((function(e,t){return Object.assign(e,t)}),{}))}))}},{key:"tablePivot",value:function(e){var t=this.normalizePivotConfig(e),n=function(e,t){return function(n,r){return p({},"measures"===n?e[r]:n,"measures"===n?t:e[r])}};return this.pivot(t).map((function(e){var r=e.xValues;return e.yValuesArray.map((function(e){var a=l(e,2),i=a[0],s=a[1];return t.x.map(n(r,s)).concat(t.y.map(n(i,s))).reduce((function(e,t){return Object.assign(e,t)}),{})})).reduce((function(e,t){return Object.assign(e,t)}),{})}))}},{key:"tableColumns",value:function(e){var t=this,n=this.normalizePivotConfig(e),r=function(e){return"measures"===e?(t.query().measures||[]).map((function(e){return{key:e,title:t.loadResponse.annotation.measures[e].title}})):[{key:e,title:(t.loadResponse.annotation.dimensions[e]||t.loadResponse.annotation.timeDimensions[e]).title}]};return n.x.map(r).concat(n.y.map(r)).reduce((function(e,t){return e.concat(t)}))}},{key:"totalRow",value:function(){return this.chartPivot()[0]}},{key:"categories",value:function(e){return this.chartPivot(e)}},{key:"seriesNames",value:function(t){var n=this;return t=this.normalizePivotConfig(t),m.pipe(m.map(this.axisValues(t.y)),m.unnest,m.uniq)(this.loadResponse.data).map((function(r){return{title:n.axisValuesString(t.y.find((function(e){return"measures"===e}))?m.dropLast(1,r).concat(n.loadResponse.annotation.measures[e.measureFromAxis(r)].title):r,", "),key:n.axisValuesString(r)}}))}},{key:"query",value:function(){return this.loadResponse.query}},{key:"rawData",value:function(){return this.loadResponse.data}}],[{key:"measureFromAxis",value:function(e){return e[e.length-1]}}]),e}(),S=function(){function e(t){s(this,e),this.sqlQuery=t}return o(e,[{key:"rawQuery",value:function(){return this.sqlQuery.sql}},{key:"sql",value:function(){return this.rawQuery().sql[0]}}]),e}(),j=function(e){return m.fromPairs(e.map((function(e){return[e.name,e]})))},v={string:[{name:"contains",title:"contains"},{name:"notContains",title:"does not contain"},{name:"equals",title:"equals"},{name:"notEquals",title:"does not equal"},{name:"set",title:"is set"},{name:"notSet",title:"is not set"}],number:[{name:"equals",title:"equals"},{name:"notEquals",title:"does not equal"},{name:"set",title:"is set"},{name:"notSet",title:"is not set"},{name:"gt",title:">"},{name:"gte",title:">="},{name:"lt",title:"<"},{name:"lte",title:"<="}]},E=function(){function e(t){s(this,e),this.meta=t;var n=this.meta.cubes;this.cubes=n,this.cubesMap=m.fromPairs(n.map((function(e){return[e.name,{measures:j(e.measures),dimensions:j(e.dimensions),segments:j(e.segments)}]})))}return o(e,[{key:"membersForQuery",value:function(e,t){return m.unnest(this.cubes.map((function(e){return e[t]})))}},{key:"resolveMember",value:function(e,t){var n=this,r=e.split("."),a=l(r,1)[0];if(!this.cubesMap[a])return{title:e,error:"Cube not found ".concat(a," for path '").concat(e,"'")};var i=(Array.isArray(t)?t:[t]).map((function(t){return n.cubesMap[a][t]&&n.cubesMap[a][t][e]})).find((function(e){return e}));return i||{title:e,error:"Path not found '".concat(e,"'")}}},{key:"defaultTimeDimensionNameFor",value:function(e){var t=this,n=e.split("."),r=l(n,1)[0];return this.cubesMap[r]?Object.keys(this.cubesMap[r].dimensions||{}).find((function(e){return"time"===t.cubesMap[r].dimensions[e].type})):null}},{key:"filterOperatorsForMember",value:function(e,t){var n=this.resolveMember(e,t);return v[n.type]||v.string}}]),e}(),x=function(){function e(t){s(this,e),this.progressResponse=t}return o(e,[{key:"stage",value:function(){return this.progressResponse.stage}},{key:"timeElapsed",value:function(){return this.progressResponse.timeElapsed}}]),e}(),k="https://statsbot.co/cubejs-api/v1",_=0,C=function(e){return new Promise((function(t,n){e.then((function(e){return t(e)}),(function(e){return"Mutex has been changed"!==e&&n(e)}))}))},T=function(){function e(t,n){s(this,e),n=n||{},this.apiToken=t,this.apiUrl=n.apiUrl||k}return o(e,[{key:"request",value:function(e,t){return u("".concat(this.apiUrl).concat(e),Object.assign({headers:{Authorization:this.apiToken,"Content-Type":"application/json"}},t||{}))}},{key:"loadMethod",value:function(e,t,n,r){var s=++_;"function"!=typeof n||r||(r=n,n=void 0);var o=(n=n||{}).mutexKey||"default";n.mutexObj&&(n.mutexObj[o]=s);var u=function(){if(n.mutexObj&&n.mutexObj[o]!==s)throw"Mutex has been changed"},c=function(){var r=i(a.mark((function r(){var i,s;return a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,e();case 2:if(502!==(i=r.sent).status){r.next=6;break}return u(),r.abrupt("return",c());case 6:return r.next=8,i.json();case 8:if("Continue wait"!==(s=r.sent).error){r.next=13;break}return u(),n.progressCallback&&n.progressCallback(new x(s)),r.abrupt("return",c());case 13:if(200===i.status){r.next=16;break}throw u(),new Error(s.error);case 16:return u(),r.abrupt("return",t(s));case 18:case"end":return r.stop()}}),r,this)})));return function(){return r.apply(this,arguments)}}();if(!r)return C(c());C(c()).then((function(e){return r(null,e)}),(function(e){return r(e)}))}},{key:"load",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("/load?query=".concat(encodeURIComponent(JSON.stringify(e))))}),(function(e){return new g(e)}),t,n)}},{key:"sql",value:function(e,t,n){var r=this;return this.loadMethod((function(){return r.request("/sql?query=".concat(JSON.stringify(e)))}),(function(e){return new S(e)}),t,n)}},{key:"meta",value:function(e,t){var n=this;return this.loadMethod((function(){return n.request("/meta")}),(function(e){return new E(e)}),e,t)}}]),e}();e.exports=function(e,t){return new T(e,t)}},207:function(e,t,n){"use strict";function r(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(t,"__esModule",{value:!0}),n(1552);var a=r(n(1559));n(1563),n(1578),n(589),n(1588);var i=r(n(1590)),s=r(n(1591)),o=r(n(1594)),u=r(n(1595)),c=r(n(1596)),l=r(n(1598)),p=n(1601),d=n(1914),m=r(n(1604)),h=r(n(1605)),y=r(n(1606));n(1608);var f=r(n(593));n(1609);var b=r(n(1610));n(594);var g=r(n(1612)),S=function(e){return e.measures&&e.measures.length||e.dimensions&&e.dimensions.length||e.timeDimensions&&e.timeDimensions.length},j=function(e){function t(e){var n;return i(this,t),(n=s(this,o(t).call(this,e))).state={},n.mutexObj={},n}return c(t,e),u(t,null,[{key:"isQueryPresent",value:function(e){return S(e)}}]),u(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.query,n=e.queries;t&&this.load(t),n&&this.loadQueries(n)}},{key:"shouldComponentUpdate",value:function(e,t){var n=this.props,r=n.query,a=n.queries,i=n.render,s=n.cubejsApi,o=n.loadSql,u=n.updateOnlyOnStateChange;return!u||(!d.equals(e.query,r)||!d.equals(e.queries,a)||(null==e.render||null==i)&&e.render!==i||e.cubejsApi!==s||e.loadSql!==o||!d.equals(t,this.state)||e.updateOnlyOnStateChange!==u)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.query,r=t.queries;d.equals(e.query,n)||this.load(n),d.equals(e.queries,r)||this.loadQueries(r)}},{key:"load",value:function(e){var n=this;this.setState({isLoading:!0,resultSet:null,error:null,sqlQuery:null});var r=this.props,i=r.loadSql,s=r.cubejsApi;e&&t.isQueryPresent(e)&&("only"===i?s.sql(e,{mutexObj:this.mutexObj,mutexKey:"sql"}).then((function(e){return n.setState({sqlQuery:e,error:null,isLoading:!1})})).catch((function(e){return n.setState({resultSet:null,error:e,isLoading:!1})})):i?Promise.all([s.sql(e,{mutexObj:this.mutexObj,mutexKey:"sql"}),s.load(e,{mutexObj:this.mutexObj,mutexKey:"query"})]).then((function(e){var t=a(e,2),r=t[0],i=t[1];return n.setState({sqlQuery:r,resultSet:i,error:null,isLoading:!1})})).catch((function(e){return n.setState({resultSet:null,error:e,isLoading:!1})})):s.load(e,{mutexObj:this.mutexObj,mutexKey:"query"}).then((function(e){return n.setState({resultSet:e,error:null,isLoading:!1})})).catch((function(e){return n.setState({resultSet:null,error:e,isLoading:!1})})))}},{key:"loadQueries",value:function(e){var t=this,n=this.props.cubejsApi;this.setState({isLoading:!0,resultSet:null,error:null}),Promise.all(d.toPairs(e).map((function(e){var r=a(e,2),i=r[0],s=r[1];return n.load(s,{mutexObj:t.mutexObj,mutexKey:i}).then((function(e){return[i,e]}))}))).then((function(e){return t.setState({resultSet:d.fromPairs(e),error:null,isLoading:!1})})).catch((function(e){return t.setState({resultSet:null,error:e,isLoading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.error,n=e.queries,r=e.resultSet,a=e.isLoading,i=e.sqlQuery,s=this.props.render;return s?s({error:t,resultSet:n?r||{}:r,loadingState:{isLoading:a},sqlQuery:i}):null}}]),t}(l.Component);j.propTypes={render:p.func,cubejsApi:p.object.isRequired,query:p.object,queries:p.object,loadSql:p.any,updateOnlyOnStateChange:p.bool},j.defaultProps={query:null,render:null,queries:null,loadSql:null,updateOnlyOnStateChange:!1};var v=function(e){var t=e.query,n=y(e,["query"]);return l.createElement(j,m({queries:{totals:h({},t,{dimensions:[],timeDimensions:t.timeDimensions?t.timeDimensions.map((function(e){return h({},e,{granularity:null})})):void 0}),main:t}},n))};v.propTypes={render:p.func,cubejsApi:p.object.isRequired,query:p.object,queries:p.object,loadSql:p.any},v.defaultProps={query:null,render:null,queries:null,loadSql:null};var E=function(e){function t(e){var n;return i(this,t),(n=s(this,o(t).call(this,e))).state=h({query:e.query,chartType:"line"},e.vizState),n}var n;return c(t,e),u(t,[{key:"componentDidMount",value:(n=g(b.mark((function e(){var t,n;return b.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.cubejsApi,e.next=3,t.meta();case 3:n=e.sent,this.setState({meta:n});case 5:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.query,r=t.vizState;d.equals(e.query,n)||this.setState({query:n}),d.equals(e.vizState,r)||this.setState(r)}},{key:"isQueryPresent",value:function(){var e=this.state.query;return j.isQueryPresent(e)}},{key:"prepareRenderProps",value:function(e){var t=this,n=function(e){return e.name},r=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return{add:function(n){var a=t.state.query;t.updateQuery(f({},e,(a[e]||[]).concat(r(n))))},remove:function(n){var r=(t.state.query[e]||[]).concat([]);return r.splice(n.index,1),t.updateQuery(f({},e,r))},update:function(n,a){var i=(t.state.query[e]||[]).concat([]);return i.splice(n.index,1,r(a)),t.updateQuery(f({},e,i))}}},a=[{name:void 0,title:"w/o grouping"},{name:"hour",title:"Hour"},{name:"day",title:"Day"},{name:"week",title:"Week"},{name:"month",title:"Month"},{name:"year",title:"Year"}],i=this.state,s=i.meta,o=i.query,u=i.chartType;return h({meta:s,query:o,validatedQuery:this.validatedQuery(),isQueryPresent:this.isQueryPresent(),chartType:u,measures:(s&&o.measures||[]).map((function(e,t){return h({index:t},s.resolveMember(e,"measures"))})),dimensions:(s&&o.dimensions||[]).map((function(e,t){return h({index:t},s.resolveMember(e,"dimensions"))})),segments:(s&&o.segments||[]).map((function(e,t){return h({index:t},s.resolveMember(e,"segments"))})),timeDimensions:(s&&o.timeDimensions||[]).map((function(e,t){return h({},e,{dimension:h({},s.resolveMember(e.dimension,"dimensions"),{granularities:a}),index:t})})),filters:(s&&o.filters||[]).map((function(e,t){return h({},e,{dimension:s.resolveMember(e.dimension,["dimensions","measures"]),operators:s.filterOperatorsForMember(e.dimension,["dimensions","measures"]),index:t})})),availableMeasures:s&&s.membersForQuery(o,"measures")||[],availableDimensions:s&&s.membersForQuery(o,"dimensions")||[],availableTimeDimensions:(s&&s.membersForQuery(o,"dimensions")||[]).filter((function(e){return"time"===e.type})),availableSegments:s&&s.membersForQuery(o,"segments")||[],updateMeasures:r("measures"),updateDimensions:r("dimensions"),updateSegments:r("segments"),updateTimeDimensions:r("timeDimensions",(function(e){return{dimension:e.dimension.name,granularity:e.granularity,dateRange:e.dateRange}})),updateFilters:r("filters",(function(e){return{dimension:e.dimension.name,operator:e.operator,values:e.values}})),updateChartType:function(e){return t.updateVizState({chartType:e})}},e)}},{key:"updateQuery",value:function(e){var t=this.state.query;this.updateVizState({query:h({},t,e)})}},{key:"updateVizState",value:function(e){var t=this.props,n=t.setQuery,r=t.setVizState,a=this.applyStateChangeHeuristics(e);if(this.setState(a),a=h({},this.state,a),n&&n(a.query),r){var i=a;i.meta;r(y(i,["meta"]))}}},{key:"validatedQuery",value:function(){var e=this.state.query;return h({},e,{filters:(e.filters||[]).filter((function(e){return e.operator}))})}},{key:"defaultHeuristics",value:function(e){var t=this.state,n=t.query,r=t.sessionGranularity||"day";if(e.query){var i=n,s=e.query,o=this.state.meta;if(1===(i.timeDimensions||[]).length&&1===(s.timeDimensions||[]).length&&s.timeDimensions[0].granularity&&i.timeDimensions[0].granularity!==s.timeDimensions[0].granularity&&(e=h({},e,{sessionGranularity:s.timeDimensions[0].granularity})),0===(i.measures||[]).length&&(s.measures||[]).length>0||1===(i.measures||[]).length&&1===(s.measures||[]).length&&i.measures[0]!==s.measures[0]){var u=o.defaultTimeDimensionNameFor(s.measures[0]);return s=h({},s,{timeDimensions:u?[{dimension:u,granularity:r}]:[]}),h({},e,{query:s,chartType:u?"line":"number"})}return 0===(i.dimensions||[]).length&&(s.dimensions||[]).length>0?(s=h({},s,{timeDimensions:(s.timeDimensions||[]).map((function(e){return h({},e,{granularity:void 0})}))}),h({},e,{query:s,chartType:"table"})):(i.dimensions||[]).length>0&&0===(s.dimensions||[]).length?(s=h({},s,{timeDimensions:(s.timeDimensions||[]).map((function(e){return h({},e,{granularity:e.granularity||r})}))}),h({},e,{query:s,chartType:(s.timeDimensions||[]).length?"line":"number"})):((i.dimensions||[]).length>0||(i.measures||[]).length>0)&&0===(s.dimensions||[]).length&&0===(s.measures||[]).length?(s=h({},s,{timeDimensions:[],filters:[]}),h({},e,{query:s,sessionGranularity:null})):e}if(e.chartType){var c=e.chartType;if(("line"===c||"area"===c)&&1===(n.timeDimensions||[]).length&&!n.timeDimensions[0].granularity){var l=a(n.timeDimensions,1)[0];return h({},e,{query:h({},n,{timeDimensions:[h({},l,{granularity:r})]})})}if(("pie"===c||"table"===c||"number"===c)&&1===(n.timeDimensions||[]).length&&n.timeDimensions[0].granularity){var p=a(n.timeDimensions,1)[0];return h({},e,{query:h({},n,{timeDimensions:[h({},p,{granularity:void 0})]})})}}return e}},{key:"applyStateChangeHeuristics",value:function(e){var t=this.props,n=t.stateChangeHeuristics;return t.disableHeuristics?e:n&&n(this.state,e)||this.defaultHeuristics(e)}},{key:"render",value:function(){var e=this,t=this.props,n=t.cubejsApi,r=t.render;return t.wrapWithQueryRenderer?l.createElement(j,{query:this.validatedQuery(),cubejsApi:n,render:function(t){return r?r(e.prepareRenderProps(t)):null}}):r?r(this.prepareRenderProps()):null}}]),t}(l.Component);E.propTypes={render:p.func,stateChangeHeuristics:p.func,setQuery:p.func,setVizState:p.func,cubejsApi:p.object.isRequired,disableHeuristics:p.bool,wrapWithQueryRenderer:p.bool,query:p.object,vizState:p.object},E.defaultProps={query:{},setQuery:null,setVizState:null,stateChangeHeuristics:null,disableHeuristics:!1,render:null,wrapWithQueryRenderer:!0,vizState:{}},t.QueryRenderer=j,t.QueryRendererWithTotals=v,t.QueryBuilder=E,t.isQueryPresent=S},712:function(e,t,n){e.exports=n(1916)}});